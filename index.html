!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Dynamic title based on language -->
  <title data-en-title="Meilech & Tzippy - The Big Day! מיילך וציפי" data-he-title="מיילך וציפי - היום הגדול! Meilech & Tzippy">Meilech & Tzippy - The Big Day! מיילך וציפי</title>
  <!-- Dynamic meta description based on language -->
  <meta name="description" data-en-content="Join Meilech & Tzippy as they tie the knot! Explore wedding details, countdown, fun facts, and share your blessings."
        data-he-content="הצטרפו למיילך וציפי כשהם קושרים את הקשר! גלו פרטי חתונה, ספירה לאחור, עובדות משעשעות ושתפו את ברכותיכם."
        content="Join Meilech & Tzippy as they tie the knot! Explore wedding details, countdown, fun facts, and share your blessings.">
  <!-- Dynamic meta keywords based on language -->
  <meta name="keywords" data-en-content="Meilech, Tzippy, Wedding, Monsey, Chuppah, Simcha, מיילך, ציפי, חתונה, שמחה"
        data-he-content="מיילך, ציפי, חתונה, מונסי, חופה, שמחה, Meilech, Tzippy, Wedding, Monsey, Chuppah, Simcha"
        content="Meilech, Tzippy, Wedding, Monsey, Chuppah, Simcha, מיילך, ציפי, חתונה, שמחה"/>

  <!-- Google Fonts - Lora (for headings) and Lato (for body) for English -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <!-- Google Fonts - Rubik (for Hebrew) -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN - Provides utility classes for rapid styling -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>

  <!-- Main CSS Styling - This is where all custom styles and color variables are defined -->
  <style id="main-css">
    /* Color Variables (Moody Navy & Copper Chic) */
    :root {
      --color-base-light: #F2F4F7; /* Light grey-blue background for base sections */
      --color-base-dark: #EDF2F7; /* Slightly darker light base for details/chat/map sections */
      --color-primary-navy: #1E2C4F; /* Deep Navy Blue - main bold accent for text/buttons */
      --color-accent-copper: #B85C3A; /* Rich Copper/Burnt Orange - highlight for links/progress */
      --color-secondary-sage: #84A98C; /* Soft Sage Green - secondary balance/subtle accents */
      --color-text-dark: #1A202C; /* Very dark grey for main text */
      --color-text-medium: #4A5568; /* Medium grey for secondary text/paragraphs */
      --color-white: #FFFFFF; /* Pure white for backgrounds of cards, etc. */
    }

    /* Global Base Styles */
    body {
      scroll-behavior: smooth;
      color: var(--color-text-dark);
      /* Direction and text alignment set by JS based on language */
    }

    /* Font Classes - dynamically set by JS */
    [lang="en"] body { font-family: 'Lato', sans-serif; direction: ltr; text-align: left; }
    [lang="he"] body { font-family: 'Rubik', sans-serif; direction: rtl; text-align: right; }

    [lang="en"] .font-heading { font-family: 'Lora', serif; }
    [lang="he"] .font-heading { font-family: 'Rubik', sans-serif; }

    [lang="en"] .font-body { font-family: 'Lato', sans-serif; }
    [lang="he"] .font-body { font-family: 'Rubik', sans-serif; }


    /* Custom Background Gradients for Sections */
    .bg-gradient-base {
      background: linear-gradient(to bottom right, var(--color-base-light), var(--color-base-dark));
    }
    .bg-gradient-details {
      background: linear-gradient(to bottom right, var(--color-base-dark), var(--color-base-light));
    }
    .bg-gradient-accent {
      background: linear-gradient(to bottom right, var(--color-primary-navy), #0A1C3E); /* Slightly darker navy for depth */
      color: var(--color-white); /* White text on dark background */
    }

    /* Custom Tailwind Overrides / New Classes */
    .text-primary-navy { color: var(--color-primary-navy); }
    .text-accent-copper { color: var(--color-accent-copper); }
    .text-secondary-sage { color: var(--color-secondary-sage); }
    .text-text-dark { color: var(--color-text-dark); }
    .text-text-medium { color: var(--color-text-medium); }
    .bg-primary-navy { background-color: var(--color-primary-navy); }
    .bg-accent-copper { background-color: var(--color-accent-copper); }
    .bg-secondary-sage { background-color: var(--color-secondary-sage); }
    .bg-card { background-color: var(--color-white); } /* For info cards, etc. */
    .text-white { color: var(--color-white); } /* Explicitly white text for dark backgrounds */


    /* Navigation Header */
    .header-nav {
      background-color: var(--color-white);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease-in-out; /* Smooth transition for background/shadow changes */
    }
    .header-nav.scrolled {
        background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        border-bottom-color: var(--color-base-dark);
    }
    .nav-link {
      position: relative;
      padding-bottom: 0.25rem; /* Space for underline */
      font-weight: 500; /* Slightly bolder */
      transition: color 0.3s ease-out; /* Smooth color transition */
    }
    /* LTR underline */
    [lang="en"] .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 50%;
      background-color: var(--color-accent-copper);
      transition: width 0.3s ease-out, left 0.3s ease-out;
    }
    [lang="en"] .nav-link:hover::after {
      width: 100%;
      left: 0;
    }
    [lang="en"] .nav-link.active::after {
      width: 100%;
      left: 0;
    }

    /* RTL underline */
    [lang="he"] .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      right: 50%; /* Start from right for RTL */
      background-color: var(--color-accent-copper);
      transition: width 0.3s ease-out, right 0.3s ease-out; /* Transition 'right' */
    }
    [lang="he"] .nav-link:hover::after {
      width: 100%;
      right: 0; /* Extends from right for RTL */
    }
    [lang="he"] .nav-link.active::after {
      width: 100%;
      right: 0;
    }

    .nav-link.active { /* For highlighting active link */
      color: var(--color-primary-navy);
      font-weight: 700;
    }

    /* Hamburger menu for mobile */
    .hamburger {
      display: none; /* Hidden by default, shown on small screens */
      cursor: pointer;
      font-size: 2rem;
      color: var(--color-primary-navy);
      z-index: 60; /* Above nav links when open */
      -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
    }
    .nav-links-container {
      display: flex;
      flex-direction: row; /* Default desktop layout */
      align-items: center;
    }

    @media (max-width: 767px) { /* Styles for screens smaller than md breakpoint */
      .hamburger {
        display: block; /* Show hamburger on mobile */
      }
      .nav-links-container {
        display: none; /* Hide desktop nav links by default on mobile */
        position: absolute;
        top: 100%; /* Position below header */
        left: 0;
        width: 100%;
        background-color: var(--color-white);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        flex-direction: column;
        padding: 1rem 0;
        border-top: 1px solid var(--color-base-dark);
        z-index: 55;
      }
      .nav-links-container.open {
        display: flex; /* Show nav links when open class is present */
      }
      .nav-links {
        flex-direction: column;
        width: 100%;
        padding: 0;
        margin: 0;
      }
      .nav-links li {
        width: 100%;
        text-align: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid var(--color-base-light);
      }
      .nav-links li:last-child {
        border-bottom: none;
      }
      .nav-link {
        display: block; /* Make links take full width */
        padding: 0.5rem 1rem;
      }
      [lang="en"] .nav-link::after { left: 0; transform: none; }
      [lang="he"] .nav-link::after { right: 0; transform: none; }
    }


    /* Hero Section Specifics */
    .hero-section {
      /* Solid background color instead of animated gradients */
      background-color: var(--color-base-light); /* Using a light solid color from palette */
      position: relative;
      min-height: 100vh;
      padding-top: 8rem;
      padding-bottom: 8rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden; /* Important for background animation */
    }

    /* Remove animated background overlay */
    .hero-section::before {
      content: none; /* Explicitly remove the pseudo-element background */
    }


    .hero-content {
      position: relative; /* Bring content above the pseudo-element overlay */
      z-index: 1; /* Ensure content is above the overlay */
      animation: fadeInScaleUp 1.2s ease-out forwards 0.5s;
      margin-top: auto;
      margin-bottom: auto;
    }
    @keyframes fadeInScaleUp {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Enhanced Hero Names Styling */
    .hero-names {
      font-size: 3.5rem; /* Base size, will scale up */
      letter-spacing: 0.05em; /* Add subtle letter spacing */
      text-shadow: 2px 2px 5px rgba(0,0,0,0.1); /* Soft shadow for depth */
      color: var(--color-primary-navy); /* Reverted to navy for contrast */
      margin-bottom: 0.5rem; /* Adjust spacing */
      line-height: 1.1;
      font-weight: 700;
      cursor: pointer; /* Indicate it's clickable for confetti */
    }
    @media (min-width: 768px) { /* md breakpoint */
      .hero-names { font-size: 5.5rem; } /* Larger on medium screens */
    }
    @media (min-width: 1024px) { /* lg breakpoint */
      .hero-names { font-size: 7rem; } /* Even larger on large screens */
    }

    /* Monogram styling */
    .monogram-svg {
      width: 4rem; /* Adjust size as needed */
      height: 4rem;
      margin-top: -1rem; /* Pull it closer to the names */
      margin-bottom: 1rem;
      transition: transform 0.3s ease-in-out; /* Keep a subtle transition for hover */
    }
    .monogram-svg:hover {
      transform: scale(1.1); /* Subtle scale on hover */
    }
    .monogram-initial {
      fill: var(--color-accent-copper); /* Use copper for the letters */
    }
    .monogram-ampersand {
      fill: var(--color-primary-navy); /* Reverted to navy for contrast */
    }


    /* General Button Styles */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 2rem;
      border-radius: 9999px; /* Full rounded */
      font-weight: 600;
      text-align: center;
      white-space: nowrap;
      border: none;
      cursor: pointer;
      text-decoration: none; /* For anchor buttons */
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transition */
    }
    .btn-primary {
      background-color: var(--color-primary-navy);
      color: var(--color-white);
    }
    .btn-primary:hover {
      background-color: var(--color-accent-copper);
      color: var(--color-white);
      transform: translateY(-2px) scale(1.02); /* Subtle lift and scale */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .btn-secondary {
      background-color: var(--color-secondary-sage);
      color: var(--color-white);
    }
    .btn-secondary:hover {
      background-color: var(--color-primary-navy);
      color: var(--color-white);
      transform: translateY(-2px) scale(1.02); /* Subtle lift and scale */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* Custom SVG Icons for Buttons */
    .btn svg {
      width: 1.5rem; /* Equivalent to h-6 w-6 */
      height: 1.5rem;
      fill: currentColor; /* Inherit color from button text */
      margin-right: 0.5rem; /* Space between icon and text */
    }
    /* Adjust for RTL */
    [lang="he"] .btn svg {
      margin-right: 0;
      margin-left: 0.5rem;
    }


    /* Countdown Card Styles */
    .countdown-card {
      background-color: transparent;
      perspective: 1000px;
      cursor: pointer;
      height: 200px; /* Much larger */
      width: 200px;  /* Much larger */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    @media (min-width: 768px) {
        .countdown-card {
            height: 250px; /* Larger on medium screens */
            width: 250px;
        }
    }
    @media (min-width: 1024px) {
        .countdown-card {
            height: 280px; /* Even larger on large screens */
            width: 280px;
        }
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transition */
      transform-style: preserve-3d;
    }
    .countdown-card.is-flipped .card-inner {
      transform: rotateY(180deg);
    }
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 0.75rem; /* rounded-xl */
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      background-color: var(--color-white);
    }
    .card-back {
      transform: rotateY(180deg);
      background-color: var(--color-secondary-sage);
      color: var(--color-white);
      font-size: 1.1rem; /* Adjusted for text fit */
      padding: 2rem; /* Increased padding for better text fit */
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center; /* Ensure joke text is centered */
    }
    .countdown-value {
      font-weight: bold;
      transition: color 0.5s ease-in-out;
      font-size: 4rem; /* Adjusted for better fit within larger squares */
    }
    @media (min-width: 768px) {
        .countdown-value { font-size: 5rem; } /* Adjusted for better fit */
    }
    @media (min-width: 1024px) {
        .countdown-value { font-size: 5.5rem; } /* Adjusted for better fit */
    }


    .countdown-grid-wrapper.intensity-low .countdown-value { color: var(--color-secondary-sage); }
    .countdown-grid-wrapper.intensity-medium .countdown-value { color: var(--color-accent-copper); }
    .countdown-grid-wrapper.intensity-high .countdown-value { color: var(--color-primary-navy); }
    .countdown-grid-wrapper.intensity-flash .card-front { animation: countdownFlash 0.8s infinite alternate; }
    .countdown-grid-wrapper.intensity-flash .countdown-value { animation: textFlash 0.8s infinite alternate; }

    @keyframes countdownFlash {
      0%, 100% { border-color: var(--color-accent-copper); box-shadow: 0 0 10px var(--color-accent-copper), 0 0 20px var(--color-accent-copper); }
      50% { border-color: var(--color-primary-navy); box-shadow: 0 0 15px var(--color-primary-navy), 0 0 25px var(--color-primary-navy); }
    }
    @keyframes textFlash {
        0%, 100% { color: var(--color-primary-navy); }
        50% { color: var(--color-accent-copper); }
    }


    /* Section Common Styles - Increased Padding */
    .section-padding {
      padding-top: 8rem; /* Increased from 5rem (py-32 equivalent) */
      padding-bottom: 8rem; /* Increased from 5rem (py-32 equivalent) */
      padding-left: 1.5rem; /* px-6 */
      padding-right: 1.5rem; /* px-6 */
      min-height: 100vh; /* Ensure sections take full viewport height */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center; /* Changed from left to center for general section text */
    }
    .section-title {
      font-size: 2.5rem; /* md:text-5xl lg:text-6xl equivalent */
      line-height: 1.2;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.05); /* Subtle text shadow */
    }
    @media (min-width: 768px) { /* md breakpoint */
      .section-title { font-size: 3.5rem; }
    }
    @media (min-width: 1024px) { /* lg breakpoint */
      .section-title { font-size: 4rem; }
    }

    /* New style for the prominent total days display */
    .total-days-display {
      font-weight: 700;
      color: var(--color-primary-navy);
      margin-bottom: 2rem;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }
    [lang="en"] .total-days-display { font-family: 'Lora', serif; font-size: 4rem; }
    [lang="he"] .total-days-display { font-family: 'Rubik', sans-serif; font-size: 3.5rem; }

    @media (min-width: 768px) {
      [lang="en"] .total-days-display { font-size: 6rem; }
      [lang="he"] .total-days-display { font-size: 5rem; }
    }


    /* Info Cards (Details, Map, Shabbos) */
    .info-card-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem; /* gap-8 */
      max-width: 72rem; /* mx-auto */
      width: 100%;
    }
    @media (min-width: 768px) {
      .info-card-grid {
        grid-template-columns: repeat(2, 1fr); /* md:grid-cols-2 */
        gap: 3rem; /* md:gap-12 */
      }
    }

    .info-card {
      background-color: var(--color-white);
      border-radius: 1.5rem; /* rounded-2xl */
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* shadow-2xl */
      padding: 2.5rem; /* p-10 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center; /* Center text within card */
      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transition */
    }
    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }
    .icon-wrapper {
      margin-bottom: 1rem;
      background-color: var(--color-secondary-sage); /* Background for icon */
      border-radius: 50%;
      padding: 0.75rem;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .icon-large {
      width: 2.5rem; /* Explicitly set size for SVG */
      height: 2.5rem; /* Explicitly set size for SVG */
      color: var(--color-white); /* Icon color */
      display: block; /* Ensure it behaves as a block for sizing */
    }

    /* Fun Facts Section */
    .fun-fact-grid {
      grid-template-columns: repeat(1, 1fr);
      gap: 1.5rem; /* gap-6 */
    }
    @media (min-width: 768px) {
      .fun-fact-grid {
        grid-template-columns: repeat(2, 1fr); /* md:grid-cols-2 */
      }
    }
    @media (min-width: 1024px) {
      .fun-fact-grid {
        grid-template-columns: repeat(3, 1fr); /* lg:grid-cols-3 */
      }
    }

    .fun-fact-card {
      background-color: var(--color-white);
      border-radius: 1.5rem; /* rounded-2xl */
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      padding: 2rem; /* p-8 */
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .fun-fact-card:hover {
      transform: translateY(-5px) rotate(1deg); /* Slight rotation on hover */
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }
    .fun-fact-title {
      color: var(--color-primary-navy);
      font-size: 1.75rem; /* text-2xl */
      font-weight: 700;
      margin-bottom: 0.75rem;
    }
    .fun-fact-text {
      color: var(--color-text-medium);
      font-size: 1.125rem; /* text-lg */
      line-height: 1.6;
    }

    /* FAQ Section */
    .faq-container {
      max-width: 48rem; /* mx-auto */
      width: 100%;
    }
    .faq-item {
      background-color: var(--color-white);
      border-radius: 1rem; /* rounded-lg */
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      overflow: hidden; /* Hide overflow when closed */
      margin-bottom: 1.5rem;
      border: 1px solid var(--color-base-dark); /* Subtle border */
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .faq-item:hover {
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
    }
    .faq-question {
      background-color: var(--color-white);
      font-weight: 600;
      font-size: 1.25rem; /* text-xl */
      padding: 1rem 1.5rem; /* py-4 px-6 */
      color: var(--color-primary-navy);
      cursor: pointer;
      user-select: none; /* Prevent text selection on click */
      transition: background-color 0.3s ease;
    }
    /* Adjust text alignment for FAQ question based on language */
    [lang="en"] .faq-question { text-align: left; }
    [lang="he"] .faq-question { text-align: right; }

    .faq-question:hover {
      background-color: var(--color-base-light);
    }
    .faq-item[open] .faq-question {
      background-color: var(--color-base-light);
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    .faq-arrow {
      color: var(--color-accent-copper);
      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      display: inline-block; /* Ensure transform applies */
    }
    /* Adjust arrow rotation for RTL */
    [lang="en"] .faq-arrow { transform: rotate(0deg); }
    [lang="he"] .faq-arrow { transform: rotate(180deg); } /* Keep it pointing same direction */
    [lang="en"] .faq-item[open] .faq-arrow { transform: rotate(180deg); }
    [lang="he"] .faq-item[open] .faq-arrow { transform: rotate(0deg); } /* Rotate back for RTL */

    .faq-answer {
      background-color: var(--color-base-light);
      padding: 0.5rem 1.5rem 1.5rem; /* pb-4 pt-2 px-6 */
      color: var(--color-text-medium);
      font-size: 1.125rem; /* text-lg */
      border-top: 1px solid var(--color-base-dark);
    }
    /* Adjust text alignment for FAQ answer based on language */
    [lang="en"] .faq-answer { text-align: left; }
    [lang="he"] .faq-answer { text-align: right; }


    /* Map Section Specifics */
    .map-embed {
      position: relative; /* Needed for absolute positioning of iframe */
      width: 100%;
      padding-bottom: 100%; /* 1:1 Aspect Ratio (Square) */
      height: 0; /* Important to collapse height and let padding define it */
      overflow: hidden; /* Ensure iframe doesn't overflow */
      border: 4px solid var(--color-primary-navy); /* Keep border */
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2); /* Keep shadow */
    }

    .map-embed iframe {
      position: absolute; /* Position iframe within the new padding-bottom container */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* Blessings Section */
    .blessing-card { /* Renamed from heart-note for clarity and consistency */
      background-color: var(--color-secondary-sage);
      color: var(--color-white); /* Text color on sage background */
      font-weight: 600;
      padding: 2rem 1.25rem;
      border-radius: 1.5rem; /* slightly less rounded than before to be consistent with cards */
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      min-height: 200px;
      font-size: 1.15rem;
      line-height: 1.6;
      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), background-color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), border-color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .blessing-card:hover {
      transform: scale(1.04) rotate(0deg);
      background-color: var(--color-accent-copper);
    }
    /* New class for visual rotation */
    .blessing-card.highlighted {
        border-color: var(--color-accent-copper);
        box-shadow: 0 0 15px var(--color-accent-copper), 0 0 25px rgba(184, 92, 58, 0.4);
        transform: scale(1.02);
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(-2deg); }
      50% { transform: translateY(-8px) rotate(0deg); }
    }
    @media (min-width: 768px) {
      .blessing-card { font-size: 1.25rem; padding: 2.5rem 1.5rem; min-height: 220px; }
    }
    @media (min-width: 1024px) {
      .blessing-card { font-size: 1.3rem; padding: 2.75rem 1.75rem; min-height: 240px; }
    }

    /* Chat & Questions Form */
    .input-field {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem; /* rounded-lg */
      border: 1px solid var(--color-base-dark);
      background-color: var(--color-base-light);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    /* Align input text left for LTR, right for RTL */
    [lang="en"] .input-field { text-align: left; }
    [lang="he"] .input-field { text-align: right; }

    .input-field:focus {
      outline: none;
      border-color: var(--color-accent-copper);
      box-shadow: 0 0 0 3px rgba(184, 92, 58, 0.2); /* Copper shadow */
    }

    /* Footer */
    footer {
      color: var(--color-text-medium);
      border-color: var(--color-base-dark);
    }
    footer a {
      color: var(--color-primary-navy);
    }
    footer a:hover {
      text-decoration: underline;
    }

    /* General Animations (can be used for hidden elements) */
    /* Fade-in for scroll animation */
    .fade-in-hidden {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .fade-in-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Styles for the secret message reveal */
    #secret-message-content {
      opacity: 0;
      transform: scaleY(0);
      transition: all 0.5s ease;
      transform-origin: top;
    }

    #secret-message-content.revealed {
      opacity: 1;
      transform: scaleY(1);
    }

    .message-box {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--color-primary-navy);
        color: var(--color-white);
        padding: 15px 30px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }
    /* Ensure message box text direction aligns with page */
    [lang="en"] .message-box { direction: ltr; text-align: left; }
    [lang="he"] .message-box { direction: rtl; text-align: right; }

    .message-box.show {
        opacity: 1;
        visibility: visible;
    }

    .loading-spinner {
        text-align: center;
        color: var(--color-primary-navy);
        font-weight: 600;
        margin-top: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
    }
    /* Ensure loading spinner text direction aligns with page */
    [lang="en"] .loading-spinner { direction: ltr; }
    [lang="he"] .loading-spinner { direction: rtl; }

    .loading-spinner svg {
        animation: spin 1.5s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .current-user-id-display {
      font-size: 0.8rem;
      color: var(--color-text-medium);
      text-align: center;
      margin-top: 1rem;
      word-break: break-all;
    }
    /* Keep User ID LTR regardless of page direction for consistency and readability of ID strings */
    .current-user-id-display { direction: ltr !important; }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }
    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background-color: var(--color-white);
      border-radius: 1.5rem;
      padding: 2rem;
      max-width: 90%;
      width: 500px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      transform: translateY(-20px);
      opacity: 0;
      transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
      position: relative;
    }
    .modal-overlay.show .modal-content {
      transform: translateY(0);
      opacity: 1;
    }

    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--color-text-medium);
      transition: color 0.2s ease;
    }
    /* Adjust close button position for RTL */
    [lang="he"] .close-btn {
      left: 1rem;
      right: auto;
    }
    .close-btn:hover {
      color: var(--color-primary-navy);
    }

    /* Back to Top Button */
    #back-to-top-btn {
        position: fixed;
        bottom: 25px;
        right: 25px;
        background-color: var(--color-primary-navy);
        color: var(--color-white);
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 1.8rem;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        z-index: 999;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #back-to-top-btn.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }
    #back-to-top-btn:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
  </style>

</head>
<body class="antialiased bg-gradient-base text-text-dark min-h-screen">

  <!-- Navigation Header - Sticky to remain visible while scrolling -->
  <header class="header-nav sticky top-0 z-50 transition-all duration-300">
    <nav class="container mx-auto flex justify-between items-center py-4 px-6">
      <!-- Site Title / Couple's Names -->
      <a href="#hero-section" class="flex items-center space-x-2 text-primary-navy font-heading text-2xl font-bold tracking-tight hover:text-accent-copper transition-colors duration-300">
          <!-- Heart SVG Icon for Site Title -->
          <svg class="h-8 w-8 text-accent-copper" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          <span data-translate-key="siteTitle">Meilech & Tzippy</span>
      </a>

      <!-- Hamburger Menu Icon for Mobile -->
      <button id="hamburger-menu" class="hamburger focus:outline-none" aria-label="Open navigation menu" data-translate-aria-label-key="openNavMenu">
        &#9776; <!-- Unicode for hamburger icon -->
      </button>

      <!-- Navigation Links Container -->
      <div id="nav-links-container" class="nav-links-container">
        <ul class="flex space-x-6 nav-links text-text-medium font-body text-sm md:text-base">
          <li><a href="#hero-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navHome">Home</a></li>
          <li><a href="#countdown-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navCountdown">Countdown</a></li>
          <li><a href="#details-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navDetails">Details</a></li>
          <li><a href="#fun-facts-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navFunFacts">Fun Facts</a></li>
          <li><a href="#faq-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navQandA">Q&A</a></li>
          <li><a href="#map-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navMap">Map</a></li>
          <li><a href="#shabbos-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navShabbos">Shabbos</a></li>
          <li><a href="#blessings-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navBrachos">Brachos</a></li>
          <li><a href="#chat-section" class="nav-link hover:text-accent-copper transition-colors duration-320" data-translate-key="navChat">Chat</a></li>
        </ul>
        <!-- Language Toggle Button -->
        <button id="lang-toggle-btn" class="ml-4 px-4 py-2 rounded-full bg-primary-navy text-white text-sm font-semibold hover:bg-accent-copper transition-colors duration-300">עברית</button>
      </div>
    </nav>
  </header>

  <!-- Hero Section - The main welcoming and initial call to action -->
  <section id="hero-section" class="hero-section relative overflow-hidden flex flex-col justify-center items-center text-center px-6 py-20 md:py-32">
    <!-- Main content container with a "frosted glass" effect -->
    <div class="relative z-10 p-8 rounded-2xl bg-white bg-opacity-90 shadow-2xl backdrop-filter backdrop-blur-sm transform transition-all duration-700 ease-in-out scale-95 opacity-0 hero-content">
      <!-- Monogram -->
      <div class="mb-4">
        <svg class="monogram-svg mx-auto" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <text x="10" y="70" font-size="60" font-weight="bold" class="monogram-initial font-heading">M</text>
          <text x="45" y="70" font-size="35" font-weight="bold" class="monogram-ampersand font-heading">&</text>
          <text x="65" y="70" font-size="60" font-weight="bold" class="monogram-initial font-heading">T</text>
        </svg>
      </div>

      <!-- Main Heading for the couple's names -->
      <h1 class="hero-names text-primary-navy leading-tight mb-4 tracking-wide font-heading" data-translate-key="heroNames">
        Meilech & Tzippy
      </h1>
      <!-- Engaging tagline -->
      <p class="text-lg md:text-xl text-text-medium mb-4" data-translate-key="heroTagline">
        Are Tying the Knot!
      </p>
      <!-- New descriptive text -->
      <p class="text-md md:text-lg text-text-medium mb-8 max-w-2xl mx-auto" data-translate-key="heroDescription">
        With hearts full of joy and excitement, we invite you to join us as we embark on our greatest adventure yet:
        building a shared future together! Your presence would make our celebration truly complete.
      </p>

      <!-- Buttons for Save the Date and Flights -->
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mb-10 w-full max-w-md mx-auto">
        <a id="save-date" href="#" target="_blank" rel="noopener noreferrer" class="btn btn-primary shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 inline-flex items-center space-x-2 w-full sm:w-auto">
          <!-- Calendar SVG Icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span data-translate-key="btnSaveDate">Save the Date!</span>
        </a>
        <a href="https://www.google.com/travel/flights/search?tfs=CBwQAhojEgoyMDI1LTEwLTI5ajwIAhIIL2m0dxzvyBwgBEgNFV1IaIxIKMjAyNS01LTA3ajHCAESA0VXUnIMCAISCC9tLzA3cXp2QAFIAXABggELCP___________wGYAQE" target="_blank" rel="noopener noreferrer" class="btn btn-primary shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 inline-flex items-center space-x-2 w-full sm:w-auto">
          <!-- Plane SVG Icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17.8 19.2L16 11l3.5-3.5C21 6.5 22 5.5 22 4.5 22 2.8 20.2 2 18.5 3.5c-1 .5-2 1.5-3.5 3L11 16 2.8 17.8c-.8.8-1.2 2-.4 2.8.8.8 2-.4 2.8-.4z"></path>
          </svg>
          <span data-translate-key="btnFindFlights">Find Your Flights!</span>
        </a>
      </div>

      <!-- Progress Bar - Now a button! -->
      <button id="progress-button" class="w-full max-w-xl mx-auto mt-6 bg-transparent border-none cursor-pointer p-0" aria-label="View wedding progress" data-translate-aria-label-key="viewWeddingProgress">
        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner">
          <div id="progress-fill" class="h-full bg-accent-copper"></div>
        </div>
        <p class="mt-3 text-text-medium text-sm md:text-base font-body">
          <span data-translate-key="progressPrefix">The excitement is brewing! Our love meter is at </span>
          <span id="percentDone" class="font-semibold">0%</span>
          <span data-translate-key="progressSuffix"> for the big day!</span>
        </p>
      </button>

      <!-- New Hidden Interactive Element -->
      <div class="mt-12">
        <button id="secret-message-trigger" class="text-text-medium hover:text-accent-copper transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-accent-copper focus:ring-opacity-50 rounded-full px-4 py-2 text-sm italic" aria-label="Discover a little secret message" data-translate-aria-label-key="discoverSecretMessage" data-translate-key="unlockSecret">
          Unlock a Tiny Treasure... 🤫
        </button>
        <div id="secret-message-content" class="hidden mt-4 p-4 bg-secondary-sage text-white rounded-lg shadow-md max-w-sm mx-auto text-base text-center transform scale-y(0) opacity-0 transition-all duration-500 origin-top">
          <!-- Secret message will be injected here by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Hidden confetti trigger spot (Easter egg) -->
    <div id="confetti-trigger-spot" class="absolute top-1/4 right-1/4 w-12 h-12 cursor-pointer opacity-0 z-30" aria-label="Trigger confetti" data-translate-aria-label-key="triggerConfetti"></div>
  </section>

  <!-- Countdown Section -->
<section id="countdown-section" class="section-padding bg-gradient-base text-center">
  <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="countdownTitle">The Countdown Is On!</h2>
  <p class="total-days-display text-primary-navy mb-12 font-heading">
    <span data-translate-key="countdownDaysLeftOnly">Only</span> <span id="daysLeftCountdown" class="text-secondary-sage">0</span> <span data-translate-key="countdownDaysLeftToGo">Days to Go!</span>
  </p>
  <div id="countdown-grid-wrapper" class="w-full max-w-5xl px-6 z-20">
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 md:gap-6 text-center">
      <!-- Card structure updated for flip animation -->
      <div id="weeks-card" class="countdown-card p-4 md:p-6">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="text-text-medium text-sm md:text-base mb-1" data-translate-key="weeks">Weeks</div>
            <div id="weeks" class="font-bold countdown-value font-heading">0</div>
          </div>
          <div class="card-face card-back">
            <p class="joke-text"></p>
          </div>
        </div>
      </div>
      <div id="days-card" class="countdown-card p-4 md:p-6">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="text-text-medium text-sm md:text-base mb-1" data-translate-key="days">Days</div>
            <div id="days" class="font-bold countdown-value font-heading">0</div>
          </div>
          <div class="card-face card-back">
            <p class="joke-text"></p>
          </div>
        </div>
      </div>
      <div id="hours-card" class="countdown-card p-4 md:p-6">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="text-text-medium text-sm md:text-base mb-1" data-translate-key="hours">Hours</div>
            <div id="hours" class="font-bold countdown-value font-heading">0</div>
          </div>
          <div class="card-face card-back">
            <p class="joke-text"></p>
          </div>
        </div>
      </div>
      <div id="minutes-card" class="countdown-card p-4 md:p-6">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="text-text-medium text-sm md:text-base mb-1" data-translate-key="minutes">Minutes</div>
            <div id="minutes" class="font-bold countdown-value font-heading">0</div>
          </div>
          <div class="card-face card-back">
            <p class="joke-text"></p>
          </div>
        </div>
      </div>
      <div id="seconds-card" class="countdown-card p-4 md:p-6">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="text-text-medium text-sm md:text-base mb-1" data-translate-key="seconds">Seconds</div>
            <div id="seconds" class="font-bold countdown-value font-heading">0</div>
          </div>
          <div class="card-face card-back">
            <p class="joke-text"></p>
          </div>
        </div>
      </div>
    </div>
    <p class="sr-only" id="totalDays">0</p>
  </div>
  <p class="text-lg md:text-xl text-text-medium mt-8 max-w-2xl mx-auto font-body">
    <span data-translate-key="totalMinutesPrefix">Our grand adventure is just </span>
    <span class="font-semibold text-primary-navy" id="minutesToWedding">Calculating...</span>
    <span data-translate-key="totalMinutesSuffix"> minutes away! Get ready for a celebration that's worth every second!</span>
  </p>
</section>


  <!-- Wedding Details Section - Core information about the event -->
  <section id="details-section" class="section-padding bg-gradient-details text-center">
    <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="detailsTitle">Wedding Day Details</h2>

    <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8 md:gap-12 info-card-grid">

      <!-- Venue Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Venue Icon (building) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="venueTitle">The Grand Venue</h3>
        <p class="text-text-medium text-lg">
          Ateres Chaya Surah<br/>
          106 S Madison Ave<br/>
          Spring Valley, NY
        </p>
        <p class="text-text-medium text-md mt-2 italic" data-translate-key="venueDescription">
          Where the magic happens, and the dance floor is always ready for action!
        </p>
      </div>

      <!-- Date Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Date Icon (calendar) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="dateTitle">The Big Day</h3>
        <p class="text-text-medium text-lg">
          <span data-translate-key="weddingDateEnglish">Monday, November 3, 2025</span><br/>
          <span data-translate-key="weddingDateHebrew">י"ב חשון תשפ"ו</span>
        </p>
        <p class="text-text-medium text-md mt-2 italic" data-translate-key="dateDescription">
          Circle it, highlight it, tattoo it! (Okay, maybe just mark it.) It's gonna be epic!
        </p>
      </div>

      <!-- Schedule Card - Spans two columns on larger screens -->
      <div class="info-card md:col-span-2 fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Schedule Icon (clock) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="scheduleTitle">The Flow of Simcha</h3>
        <p class="text-text-medium text-lg leading-relaxed">
          <strong data-translate-key="kabulasPanimTime">Kabulas Panim</strong> – <span data-translate-key="kabulasPanimValue">6:30 PM (Arrive early, good food starts punctually!)</span><br/>
          <strong data-translate-key="chuppahTime">Chuppah</strong> – <span data-translate-key="chuppahValue">7:30 PM (Prepare for happy tears and timeless moments!)</span><br/>
          <strong data-translate-key="seudahTime">Seudah</strong> – <span data-translate-key="seudahValue">8:30 PM (Let the feasting begin! You'll be glad you wore stretchy pants.)</span><br/>
          <strong data-translate-key="dancingBeginsTime">Dancing Begins</strong> – <span data-translate-key="dancingBeginsValue">10:00 PM (Bring your dancing shoes and prepare for maximum simcha!)</span>
        </p>
      </div>

      <!-- Vibe Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Vibe Icon (sparkles/celebration) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4L13 6 15 4 13 2 11 4Z"></path><path d="M19 8L21 10 19 12 17 10 19 8Z"></path><path d="M10 17L12 19 14 17 12 15 10 17Z"></path><path d="M2 12L4 14 6 12 4 10 2 12Z"></path>
            <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.03L12 21.35Z"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="vibeTitle">The Vibe</h3>
        <p class="text-text-medium text-lg" data-translate-key="vibeDescription">
          Come ready to celebrate in joy and dignity. The evening will be full of music, warmth, and true simcha – expect some serious dancing!
        </p>
      </div>

      <!-- Transportation Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Transportation Icon (car) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 17l-2 0l-2 3l6 0l-2 -3Z"></path><path d="M10 17h4l-2 -3h-2Z"></path><path d="M17 17h-2l-2 3h6l-2 -3Z"></path>
            <path d="M17 17l4 0"></path><path d="M5 17l-2 0"></path><path d="M7 17l0 -4"></path><path d="M17 17l0 -4"></path><path d="M12 17l0 -4"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="transportationTitle">Getting There</h3>
        <p class="text-text-medium text-lg" data-translate-key="transportationDescription">
          Parking's on us! Carpool for extra good vibes (and to make sure you have a designated dance partner).
        </p>
      </div>
    </div>
  </section>

  <!-- Fun Facts Section - New section with playful trivia -->
  <section id="fun-facts-section" class="section-padding bg-gradient-accent text-center">
    <h2 class="section-title text-white mb-10 font-heading" data-translate-key="funFactsTitle">Fun Facts & Funtastic Tidbits!</h2>
    <p class="text-lg text-white opacity-80 mb-12 max-w-2xl mx-auto font-body" data-translate-key="funFactsDescription">
      Because every epic love story deserves a few surprising footnotes and random trivia. Prepare to be amused!
    </p>

    <!-- Grid for fun fact cards -->
    <div class="max-w-5xl mx-auto grid md:grid-cols-2 lg:grid-cols-3 gap-6 fun-fact-grid">

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factDidYouKnowTitle">Did You Know?</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factDidYouKnowText">
          On November 3rd, our wedding day, we're not just tying the knot—we're also celebrating National Sandwich Day! Coincidence? We think not. Prepare for a love that's as layered and satisfying as your favorite deli creation!
        </p>
      </div>

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factMusicalTitle">Musical Interlude</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factMusicalText">
          Prepare your vocal cords! We're anticipating a symphony of enthusiastic 'Mazel Tovs!' and joyous singing that will shake the rafters (in the best way possible, of course!).
        </p>
      </div>

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factRoyalStatusTitle">Royal Status</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factRoyalStatusText">
          According to Jewish tradition, the Kallah is a queen and the Chassan is a king on their wedding day. So, feel free to address us by our royal titles! (Only for November 3rd, promise.)
        </p>
      </div>

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factSweetPredictionsTitle">Sweet Predictions</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factSweetPredictionsText">
          We predict the dessert table will be the most popular dance floor. Make sure to grab your treats early, before the sugar rush kicks in!
        </p>
      </div>

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factDancingShoesTitle">Dancing Shoes Alert</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factDancingShoesText">
          Good news, dance enthusiasts! We've surveyed the dance floor, and it's officially certified for maximum simcha! There's plenty of room for all your best moves, so don't hold back!
        </p>
      </div>

      <div class="fun-fact-card fade-in-hidden">
        <h3 class="font-heading text-primary-navy fun-fact-title" data-translate-key="factHistoricDayTitle">Historic Day</h3>
        <p class="fun-fact-text text-text-medium font-body" data-translate-key="factHistoricDayText">
          Our wedding day shares its date with a historic launch: on November 3rd, 1957, Sputnik 2 carried the dog Laika into space. We're also launching into something boundless—marriage! (With slightly less zero-gravity, thankfully).
        </p>
      </div>

    </div>
  </section>

  <!-- FAQ Section - New section for common questions with humorous answers -->
  <section id="faq-section" class="section-padding bg-gradient-base text-center">
    <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="faqTitle">Your Burning Questions (and Our Honest Answers)</h2>
    <p class="text-lg text-text-medium mb-12 max-w-2xl mx-auto font-body" data-translate-key="faqDescription">
      We know you've got 'em. Here are the answers to the questions you're *actually* thinking.
    </p>

    <!-- Accordion-style FAQ using <details> and <summary> tags -->
    <div class="max-w-3xl mx-auto space-y-6 faq-container">

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ1">What time should I arrive?</span>
          <!-- Arrow icon for accordion toggle -->
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA1">
          <p>We'd love to see you for Kabulas Panim at <strong>6:30 PM</strong>. Don't miss the Chuppah at 7:30 PM – it's the main event! Seriously, the good parts (and food!) start punctually.</p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ2">What's the dress code?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA2">
          <p>Dress to impress, but also dress to dance! Formal, modest attire is appreciated. Think "Simcha Chic" – because comfort meets elegance when you're celebrating!</p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ3">Can I bring my kids?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA3">
          <p>Absolutely! The more simcha, the merrier. Just remember to keep them away from the band's drum set and the dessert table (unless you brought extra for us!).</p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ4">Is there food?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA4">
          <p>Is the sky blue?! We're having a wedding, so yes, there will be plenty of delicious food. Come hungry, leave happy!</p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ5">Where can I park?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA5">
          <p>Ample parking is available on-site. For the full Monsey experience, allow an extra 15 minutes for unexpected traffic (especially on simcha days!).</p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ6">Can I take photos?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA6">
          <p>We kindly request no flash photography during the Chuppah. Otherwise, snap away and share the simcha! Just don't block the professional photographers – they've got a job to do!</p>
        </div>
      </details>

      <!-- NEW: Flashmob FAQ -->
      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ7">Can I be part of the flashmob?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body">
          <p><span data-translate-key="faqA7_line1">You're asking the real questions! Absolutely! If you've got moves (or even just enthusiasm!), we'd love to have you.</span> <span data-translate-key="faqA7_line2">Just reach out to <a href="mailto:tzippykornbluh@gmail.com" data-email-trigger="tzippykornbluh@gmail.com" class="text-primary-navy hover:underline font-bold" data-translate-key="tzippyKallah">Tzippy the kallah</a>, and she'll share all the secret steps and make sure you're ready to bust a move! Get ready to dance the night away!</span></p>
        </div>
      </details>

      <details class="faq-item group">
        <summary class="faq-question font-heading text-primary-navy cursor-pointer flex justify-between items-center py-4 px-6 rounded-lg transition-colors duration-300">
          <span data-translate-key="faqQ8">What if I have a question not listed here?</span>
          <span class="faq-arrow">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </span>
        </summary>
        <div class="faq-answer px-6 pb-4 pt-2 text-text-medium text-lg leading-relaxed font-body" data-translate-key="faqA8">
          <p>No worries! Scroll down to our "Chat" section – we're (virtually) here to help with almost anything. Or just find us at the dessert table on the night!</p>
        </div>
      </details>

    </div>
  </section>

  <!-- Map Section - Provides directions and key locations -->
  <section id="map-section" class="section-padding bg-gradient-details text-center">
    <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="mapTitle">Where to Find the Fun</h2>
    <p class="text-lg text-text-medium mb-4 max-w-2xl mx-auto font-body" data-translate-key="mapLost">
      Lost? Don’t worry! We've pinned all the essential simcha stops just for you.
    </p>
    <p class="text-md text-text-medium mb-10 italic max-w-2xl mx-auto font-body" data-translate-key="mapFollowMusic">
      Need help finding us? Just follow the music and smiles — we’ll be there!
    </p>
    <!-- Embedded Google Map - Now within its own info-card for consistent styling and smaller size -->
    <div class="info-card-grid max-w-sm mx-auto"> <!-- Changed max-w-2xl to max-w-sm for a much smaller map -->
      <div class="info-card md:col-span-2 fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Location Pin SVG Icon -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-4" data-translate-key="locationMapTitle">Location Map</h3>
        <div class="map-embed rounded-2xl w-full"> <!-- w-full ensures it takes 100% width of its parent info-card -->
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3013.9175390779774!2d-74.0150998!3d41.139634200000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c2c62c9c7f66bf%3A0xb3e1c6b1b4a8e637!2sAteres%20Chaya%20Surah!5e0!3m2!1sen!2us!4v1700688654477!5m2!1sen!2us"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
        <p class="text-text-medium mt-6 max-w-2xl mx-auto font-body" data-translate-key="mapGuideText">
          Your guide to the grand celebration! See you there, ready to party!
        </p>
        <a href="https://www.google.com/maps/dir/?api=1&destination=Ateres+Chaya+Surah,+106+S+Madison+Ave,+Spring+Valley,+NY" target="_blank" rel="noopener noreferrer" class="btn btn-secondary mt-4 inline-flex items-center space-x-2 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105">
          <!-- Directions SVG Icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
            <line x1="16" y1="2" x2="16" y2="18"></line>
            <line x1="8" y1="6" x2="8" y2="22"></line>
          </svg>
          <span data-translate-key="btnGetDirections">Get Directions</span>
        </a>
      </div>
    </div>
    <!-- Pinned locations and tip -->
    <div class="max-w-4xl mx-auto text-left info-card-grid grid md:grid-cols-2 gap-8 md:gap-12 mt-12">
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- List/Clipboard SVG Icon for "What's Pinned" -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"></path>
            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-3" data-translate-key="whatsPinnedTitle">What’s Pinned?</h3>
        <ul class="list-disc list-inside text-text-medium space-y-2 font-body">
          <li><strong data-translate-key="venueLabel">Wedding Venue:</strong> Ateres Chaya Surah, Spring Valley</li>
          <li><strong data-translate-key="oifrufLabel">Oifruf:</strong> 3 Harvest Ct, Monsey</li>
          <li><strong data-translate-key="bogleitenLabel">Bogleiten:</strong> 15 Sophia St, Monsey</li>
          <li><strong data-translate-key="bovarfenLabel">Bovarfen:</strong> Belz Shul, 1 Harvest Ct</li>
          <li><strong data-translate-key="shabbosBrachasLabel">Shabbos Sheva Brachas:</strong> Bobov Shul, Jill Ln</li>
        </ul>
      </div>
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Lightbulb SVG Icon for "Top Tip" -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            <path d="M12 18L12 12"></path>
            <path d="M9 10L12 12"></path>
            <path d="M15 10L12 12"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-3" data-translate-key="topTipTitle">Top Tip:</h3>
        <p class="text-text-medium font-body" data-translate-key="topTipText">
          Monsey traffic: A wild card! Leave extra time to avoid missing appetizers (the horror!).
        </p>
      </div>
    </div>
  </section>

  <!-- Shabbos Events Section - Details for surrounding Shabbos gatherings -->
  <section id="shabbos-section" class="section-padding bg-gradient-accent text-center">
    <h2 class="section-title text-white mb-10 font-heading" data-translate-key="shabbosEventsTitle">Shabbos Oifruf & Sheva Brachas</h2>
    <p class="text-lg text-white opacity-80 mb-12 max-w-2xl mx-auto font-body" data-translate-key="shabbosEventsDescription">
      The simcha continues! Join us for these special Shabbos gatherings surrounding our wedding celebration.
    </p>
    <!-- Grid for Shabbos event cards -->
    <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8 md:gap-12 info-card-grid">

      <!-- Oifruf Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Torah Scroll SVG Icon -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 21h22"></path>
            <path d="M7 21V5a2 2 0 012-2h6a2 2 0 012 2v16"></path>
            <path d="M16 17H8"></path>
            <path d="M16 13H8"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="oifrufSeudahTitle">Shabbos Oifruf Seudah</h3>
        <p class="text-text-medium text-lg">
          Beth Medrash D'Monsey Simcha Hall<br/>
          3 Harvest Ct.<br/>
          Monsey, NY 10952
        </p>
        <p class="text-text-medium text-md mt-2 italic font-body" data-translate-key="oifrufSeudahDescription">
          Join us to wish the Chassan a thunderous Mazel Tov before the big day! Expect an atmosphere buzzing with good vibes!
        </p>
      </div>

      <!-- Bogleiten Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Walking People SVG Icon -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="4" r="2"></circle>
            <path d="M8 21v-5h4l-2-7c-.5-1.5 1-2.5 1.5-2.5s2.5.5 3 2.5l2 7h4v5z"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="bogleitenTitle">Bogleiten</h3>
        <p class="text-text-medium text-lg">
          <span data-translate-key="bogleitenDepartingFrom">Departing from:</span><br/>
          15 Sophia St.<br/>
          Monsey, NY 10952
        </p>
        <p class="text-text-medium text-md mt-2 italic font-body" data-translate-key="bogleitenDescription">
          The Kallah's grand send-off! Bring your loudest singing voices and prepare for a joyous procession!
        </p>
      </div>

      <!-- Bovarfen Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Candy SVG Icon for Bovarfen (representing treats/candy) -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22v-5l-2-2"></path>
            <path d="M12 22v-5l2-2"></path>
            <path d="M12 17l2-2h4l2-2V7.5L18 5 15 2 12 5 9 2 6 5 4 7.5V11l2 2h4l2 2Z"></path>
            <path d="M10 11L12 13L14 11"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="bovarfenTitle">Bovarfen</h3>
        <p class="text-text-medium text-lg">
          Belz Shul<br/>
          1 Harvest Ct.<br/>
          Monsey, NY 10952
        </p>
        <p class="text-text-medium text-md mt-2 italic font-body" data-translate-key="bovarfenDescription">
          Get ready for sweet treats and even sweeter moments! (Strategic candy-catching highly encouraged.)
        </p>
      </div>

      <!-- Sheva Brachas Card -->
      <div class="info-card fade-in-hidden">
        <div class="icon-wrapper">
          <!-- Star/Sparkle SVG Icon for Sheva Brachas -->
          <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 1l3 6 6 3-6 3-3 6-3-6-6-3 6-3 3-6Z"></path>
          </svg>
        </div>
        <h3 class="font-heading text-2xl font-bold text-primary-navy mb-2" data-translate-key="shevaBrachasTitle">Shabbos Sheva Brachas</h3>
        <p class="text-text-medium text-lg">
          Bobov Shul<br/>
          20 Jill Ln.<br/>
          Monsey, NY 10952
        </p>
        <p class="text-text-medium text-md mt-2 italic font-body" data-translate-key="shevaBrachasDescription">
          Extend the simcha on Shabbos with us! Expect more delicious food and even more incredible company.
        </p>
      </div>
    </div>
  </section>

  <!-- Blessings Section -->
<section id="blessings-section" class="section-padding bg-gradient-base text-center">
    <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="blessingsTitle">Heartfelt Wishes & Happy Thoughts!</h2>
    <p class="text-lg text-text-medium mb-12 max-w-2xl mx-auto font-body" data-translate-key="blessingsDescription">
      A few words from our nearest and dearest (and some we just made up for fun).
    </p>
    <div id="blessing-wall" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
      <!-- Curated blessings will be injected here by JavaScript -->
    </div>
</section>


  <!-- Chat & Questions Section - Form for guests to ask questions -->
  <section id="chat-section" class="section-padding bg-gradient-details text-center">
    <h2 class="section-title text-primary-navy mb-10 font-heading" data-translate-key="chatTitle">Got a Burning Question?</h2>
    <p class="text-lg text-text-medium mb-10 max-w-2xl mx-auto font-body" data-translate-key="chatDescription">
      Whether it's about directions, what time to show up, or where to find the best kugel — we’re (virtually) here to help!
    </p>

    <!-- Contact Form -->
    <div class="max-w-2xl mx-auto bg-card rounded-2xl shadow-2xl p-8 md:p-10">
      <form id="contact-form" class="space-y-6">
        <!-- Hidden input to disable reCAPTCHA for verified domains on Formsubmit -->
        <input type="hidden" name="_captcha" value="false">
        <!-- Add _subject to define email subject line -->
        <input type="hidden" name="_subject" value="Wedding Website Inquiry!">

        <!-- Honeypot field for basic bot spam protection (visually hidden) -->
        <div style="display: none;">
          <label for="hp_field" data-translate-key="hpFieldLabel">Leave this blank</label>
          <input type="text" id="hp_field" name="hp_field" autocomplete="off">
        </div>

        <!-- Name Input -->
        <div class="text-left">
          <label for="chat-name" class="block text-lg text-primary-navy font-semibold mb-2 font-body" data-translate-key="yourNameLabel">Your Name</label>
          <input type="text" id="chat-name" name="name" required class="input-field" aria-label="Your Name" data-translate-aria-label-key="yourName" data-translate-placeholder-key="yourNamePlaceholder">
        </div>

        <!-- Email Input -->
        <div class="text-left">
          <label for="chat-email" class="block text-lg text-primary-navy font-semibold mb-2 font-body" data-translate-key="yourEmailLabel">Your Email</label>
          <input type="email" id="chat-email" name="email" required class="input-field" aria-label="Your Email" data-translate-aria-label-key="yourEmail" data-translate-placeholder-key="yourEmailPlaceholder">
        </div>

        <!-- Message/Question Textarea -->
        <div class="text-left">
          <label for="question" class="block text-lg text-primary-navy font-semibold mb-2 font-body" data-translate-key="yourQuestionLabel">Your Question / Message</label>
          <textarea id="question" name="question" rows="5" required class="input-field" aria-label="Your Question or Message" data-translate-aria-label-key="yourQuestionMessage" data-translate-placeholder-key="yourQuestionPlaceholder"></textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" id="submit-contact-btn" class="btn btn-primary w-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105" data-translate-key="btnSendMessage">
          Send Your Message!
        </button>
      </form>

      <!-- Humorous closing note -->
      <div class="mt-10 text-text-medium italic text-lg font-body" data-translate-key="chatClosingNote">
        <p>We’ll get back to you ASAP – or just find us by the dessert table (we'll probably be there!) 😉</p>
      </div>
    </div>
  </section>

  <!-- Thank You Section - A heartfelt message to guests -->
  <section id="thankyou-section" class="section-padding bg-gradient-base text-center">
    <h2 class="section-title text-primary-navy mb-8 font-heading" data-translate-key="thankYouTitle">A Heartfelt Thank You, from Meilech and Tzippy!</h2>
    <!-- Thank you message container -->
    <div class="max-w-4xl mx-auto text-lg text-text-medium space-y-6 bg-card rounded-2xl shadow-2xl p-8 md:p-10 font-body">
      <p data-translate-key="thankYouGreeting">Dearest family and friends,</p>
      <p data-translate-key="thankYouPara1">As our wedding day draws near, our hearts are absolutely bursting with excitement and an overwhelming sense of gratitude. Looking back at all the incredible moments leading up to this, we realize just how lucky we are to have each of you in our lives. Your unwavering support, endless encouragement, and the sheer joy you've shared with us have made every step of this journey truly unforgettable.</p>
      <p data-translate-key="thankYouPara2">From the bottom of our hearts, thank you for being a part of our story. Thank you for the laughs, the advice, the simcha, and for simply being *you*. Knowing you're celebrating with us, whether in person or in spirit, fills us with so much happiness.</p>
      <p data-translate-key="thankYouPara3">Get ready for a night of epic dancing, delicious food, and memories we'll cherish forever. We truly can't wait to share this momentous occasion with you and begin our lives together as husband and wife.</p>
      <p class="text-2xl md:text-3xl font-bold font-heading text-primary-navy mt-8" data-translate-key="thankYouClosing">With all our love and excitement,</p>
      <p class="text-3xl md:text-4xl font-bold font-heading text-primary-navy" data-translate-key="thankYouNames">Meilech & Tzippy</p>
    </div>

    <!-- Share with Friends Button -->
    <div class="mt-12">
      <button id="share-website-btn" class="btn btn-primary shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 inline-flex items-center space-x-2">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        <span data-translate-key="btnShareWithFriends">Share with Friends!</span>
      </button>
    </div>

    <!-- Button to navigate back to the chat section -->
    <div class="mt-8">
      <a href="#chat-section" class="btn btn-secondary shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105" data-translate-key="btnStillQuestion">
        Still Have a Question? Chat With Us!
      </a>
    </div>
  </section>

  <!-- Footer - Copyright and contact information -->
  <footer class="text-center py-8 text-text-medium text-sm border-t border-gray-200 font-body">
    <p class="mb-2" data-translate-key="footerCopyright">&copy; 2025 Meilech & Tzippy. Built with love, laughter, and a touch of magic.</p>
    <p data-translate-key="footerQuestions">Questions? Reach out to us at <a href="mailto:elimelechmoster@gmail.com" class="text-primary-navy hover:underline">elimelechmoster@gmail.com</a></p>
  </footer>

  <!-- Message box for copy confirmation -->
  <div id="message-box" class="message-box"></div>

  <!-- Back to Top Button -->
  <button id="back-to-top-btn" aria-label="Back to top">
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
  </button>
  
  <!-- Confetti.js CDN - Required for confetti effects -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // --- Main JavaScript (Encapsulated for scope and organization) ---
    (function(){
      // --- Configuration Variables ---
      const ENGAGEMENT_TS = new Date("2025-01-29T00:00:00").getTime();
      const WEDDING_TS    = new Date("2025-11-03T18:30:00").getTime(); // Nov 3, 2025 at 6:30 PM
      const FORM_SUBMIT_EMAILS = 'elimelechmoster@gmail.com, tzippykornbluh@gmail.com'; // New: Multiple recipients for form submissions

      // --- DOM Element References ---
      const htmlElement         = document.documentElement;
      const headElement         = document.head;
      const navHeader           = document.querySelector(".header-nav");
      const hamburgerMenu       = document.getElementById("hamburger-menu");
      const navLinksContainer   = document.getElementById("nav-links-container");
      const navLinks            = document.querySelectorAll(".nav-link");
      const langToggleButton    = document.getElementById("lang-toggle-btn");
      const heroContent         = document.querySelector(".hero-content");
      const saveDateBtn         = document.getElementById("save-date");
      const progressButton      = document.getElementById("progress-button");
      const progressFillEl      = document.getElementById("progress-fill");
      const percentDoneEl       = document.getElementById("percentDone");
      const secretMessageTrigger= document.getElementById('secret-message-trigger');
      const secretMessageContent= document.getElementById('secret-message-content');
      const confettiTriggerSpot = document.getElementById("confetti-trigger-spot");
      const daysLeftCountdownEl = document.getElementById("daysLeftCountdown");
      const totalDaysHiddenEl   = document.getElementById("totalDays");
      const weeksEl             = document.getElementById("weeks");
      const daysEl              = document.getElementById("days");
      const hoursEl             = document.getElementById("hours");
      const minsEl              = document.getElementById("minutes");
      const secsEl              = document.getElementById("seconds");
      const totalMinutesDisplayEl = document.getElementById("minutesToWedding");
      const blessingWall        = document.getElementById("blessing-wall");
      const messageBox          = document.getElementById('message-box');
      const contactForm            = document.getElementById('contact-form');
      const allTranslatableElements = document.querySelectorAll(
          '[data-translate-key]:not(#percentDone):not(#minutesToWedding), ' +
          '[data-translate-aria-label-key], [data-translate-placeholder-key]'
      );
      const metaTitle = headElement.querySelector('title');
      const metaDescription = headElement.querySelector('meta[name="description"]');
      const metaKeywords = headElement.querySelector('meta[name="keywords"]');
      const countdownGridWrapper = document.getElementById('countdown-grid-wrapper');
      const heroNamesEl         = document.querySelector('.hero-names'); // For confetti trigger
      const backToTopBtn        = document.getElementById('back-to-top-btn');
      const shareWebsiteBtn     = document.getElementById('share-website-btn');


      // --- State Variables ---
      let countdownInterval; // Defined in the outer scope
      let secretMessageTimeout;
      let currentSecretMessageIndex = 0;
      let initialBlessingsInterval = null;
      let currentHighlightedBlessingIndex = 0;
      let lastJokeIndex = -1;
      let currentAnimatedPercent = 0;
      let currentLang = 'en'; // Initialized to 'en' by default
      let app, db, auth, userId;
      let isAuthReady = false;
      let tipInterval; // For periodic tips


      // --- Curated Blessings Data (Replaces public submissions) ---
      const curatedBlessings_en = [
          { name: "Your Aunt Rivky", text: "May your home always be filled with joy and laughter! So happy for you both!" },
          { name: "Moshe G.", text: "Mazel Tov on this incredible journey! Wishing you a lifetime of happiness." },
          { name: "Next-Door Neighbor", text: "So excited to celebrate with you! May your life together be as sweet as our neighborhood desserts." },
          { name: "Your Cousin Sarah", text: "From playdates to wedding dates, so much love for you both! Mazel Tov!" },
          { name: "A Family Friend", text: "May your days be blessed with harmony, health, and endless simcha. All the best!" },
          { name: "The Baker from Main St.", text: "Wishing you a marriage as perfectly crafted and delightful as a fresh challah! Mazel Tov!" },
          { name: "An Admirer", text: "May your love story inspire all who witness it. Mazel Tov to the beautiful couple!" }
      ];

      const curatedBlessings_he = [
          { name: "דודה רבקי", text: "שביתכם תמיד יתמלא בשמחה וצחוק! כל כך שמחה בשבילכם, מזל טוב!" },
          { name: "משה ג.", text: "מזל טוב למסע המדהים הזה! מאחל לכם חיים של אושר אינסופי." },
          { name: "השכן ממול", text: "מתרגש מאוד לחגוג איתכם! יהי רצון שחייכם המשותפים יהיו מתוקים כמו הקינוחים מהשכונה שלנו." },
          { name: "בת דודתכם שרה", text: "מפגישות משחק ועד יום החתונה, כל כך הרבה אהבה לשניכם! מזל טוב!" },
          { name: "ידיד המשפחה", text: "שיימיכם יתברכו בהרמוניה, בריאות ושמחה ללא גבול. כל טוב!" },
          { name: "האופה מהרחוב הראשי", text: "מאחל לכם נישואין מושלמים ומהנים כמו חלה טרייה! מזל טוב!" },
          { name: "מעריץ אנונימי", text: "שסיפור האהבה שלכם יעניק השראה לכל מי שזוכה לראות אותו. מזל טוב לזוג המהמם!" }
      ];

      // Array of periodic funny tips
      const funnyTips_en = [
        "Don't forget your dancing shoes! We've got a certified simcha zone.",
        "Hydration is key! Especially when there's this much joyous dancing.",
        "If you see us looking stressed, just shout 'Mazel Tov!' It helps.",
        "Warning: Spontaneous outbreaks of happiness may occur. Embrace it!",
        "Lost your partner on the dance floor? Check the dessert table, they're probably there.",
        "Remember: calories consumed at a simcha don't count. It's science!"
      ];
      const funnyTips_he = [
        "אל תשכחו את נעלי הריקוד! יש לנו פה רחבת שמחה מאושרת רשמית.",
        "הידרציה היא המפתח! במיוחד כשיש כל כך הרבה ריקודי שמחה.",
        "אם אתם רואים אותנו לחוצים, פשוט תצעקו 'מזל טוב!' זה עוזר.",
        "אזהרה: התפרצויות ספונטניות של אושר עלולות להתרחש. תזרמו עם זה!",
        "איבדתם את בן/בת הזוג ברחבת הריקודים? בדקו בשולחן הקינוחים, הם כנראה שם.",
        "זכרו: קלוריות שנצרכות בשמחה לא נספרות. זו עובדה מדעית!"
      ];


      // --- Data Arrays (Multilingual) ---
      const translations = {
        en: {
          siteTitle: 'Meilech & Tzippy',
          navHome: 'Home',
          navCountdown: 'Countdown',
          navDetails: 'Details',
          navFunFacts: 'Fun Facts',
          navQandA: 'Q&A',
          navMap: 'Map',
          navShabbos: 'Shabbos',
          navBrachos: 'Brachos',
          navChat: 'Chat',
          openNavMenu: 'Open navigation menu',
          heroNames: 'Meilech & Tzippy',
          heroTagline: 'Are Tying the Knot!',
          heroDescription: 'With hearts full of joy and excitement, we invite you to join us as we embark on our greatest adventure yet: building a shared future together! Your presence would make our celebration truly complete.',
          btnSaveDate: 'Save the Date!',
          btnFindFlights: 'Find Your Flights!',
          progressPrefix: 'The excitement is brewing! Our love meter is at ',
          progressSuffix: ' for the big day!',
          unlockSecret: 'Unlock a Tiny Treasure... 🤫',
          discoverSecretMessage: 'Discover a little secret message',
          triggerConfetti: 'Trigger confetti',
          countdownTitle: 'The Countdown Is On!',
          countdownDaysLeftOnly: 'Only',
          countdownDaysLeftToGo: 'Days to Go!',
          weeks: 'Weeks',
          days: 'Days',
          hours: 'Hours',
          minutes: 'Minutes',
          seconds: 'Seconds',
          totalMinutesPrefix: 'Our grand adventure is just ',
          totalMinutesSuffix: ' minutes away! Get ready for a celebration that\'s worth every second!',
          detailsTitle: 'Wedding Day Details',
          venueTitle: 'The Grand Venue',
          venueDescription: 'Where the magic happens, and the dance floor is always ready for action!',
          dateTitle: 'The Big Day',
          weddingDateEnglish: 'Monday, November 3, 2025',
          weddingDateHebrew: 'י"ב חשון תשפ"ו',
          dateDescription: 'Circle it, highlight it, tattoo it! (Okay, maybe just mark it.) It\'s gonna be epic!',
          scheduleTitle: 'The Flow of Simcha',
          kabulasPanimTime: 'Kabulas Panim',
          kabulasPanimValue: '6:30 PM (Arrive early, good food starts punctually!)',
          chuppahTime: 'Chuppah',
          chuppahValue: '7:30 PM (Prepare for happy tears and timeless moments!)',
          seudahTime: 'Seudah',
          seudahValue: '8:30 PM (Let the feasting begin! You\'ll be glad you wore stretchy pants.)',
          dancingBeginsTime: 'Dancing Begins',
          dancingBeginsValue: '10:00 PM (Bring your dancing shoes and prepare for maximum simcha!)',
          vibeTitle: 'The Vibe',
          vibeDescription: 'Come ready to celebrate in joy and dignity. The evening will be full of music, warmth, and true simcha – expect some serious dancing!',
          transportationTitle: 'Getting There',
          transportationDescription: 'Parking\'s on us! Carpool for extra good vibes (and to make sure you have a designated dance partner).',
          funFactsTitle: 'Fun Facts & Funtastic Tidbits!',
          funFactsDescription: 'Because every epic love story deserves a few surprising footnotes and random trivia. Prepare to be amused!',
          factDidYouKnowTitle: 'Did You Know?',
          factDidYouKnowText: 'On November 3rd, our wedding day, we\'re not just tying the knot—we\'re also celebrating National Sandwich Day! Coincidence? We think not. Prepare for a love that\'s as layered and satisfying as your favorite deli creation!',
          factMusicalTitle: 'Musical Interlude',
          factMusicalText: 'Prepare your vocal cords! We\'re anticipating a symphony of enthusiastic \'Mazel Tovs!\' and joyous singing that will shake the rafters (in the best way possible, of course!).',
          factRoyalStatusTitle: 'Royal Status',
          factRoyalStatusText: 'According to Jewish tradition, the Kallah is a queen and the Chassan is a king on their wedding day. So, feel free to address us by our royal titles! (Only for November 3rd, promise.)',
          factSweetPredictionsTitle: 'Sweet Predictions',
          factSweetPredictionsText: 'We predict the dessert table will be the most popular dance floor. Make sure to grab your treats early, before the sugar rush kicks in!',
          factDancingShoesTitle: 'Dancing Shoes Alert',
          factDancingShoesText: 'Good news, dance enthusiasts! We\'ve surveyed the dance floor, and it\'s officially certified for maximum simcha! There\'s plenty of room for all your best moves, so don\'t hold back!',
          factHistoricDayTitle: 'Historic Day',
          factHistoricDayText: 'Our wedding day shares its date with a historic launch: on November 3rd, 1957, Sputnik 2 carried the dog Laika into space. We\'re also launching into something boundless—marriage! (With slightly less zero-gravity, thankfully).',
          faqTitle: 'Your Burning Questions (and Our Honest Answers)',
          faqDescription: 'We know you\'ve got \'em. Here are the answers to the questions you\'re *actually* thinking.',
          faqQ1: 'What time should I arrive?',
          faqA1: 'We\'d love to see you for Kabulas Panim at <strong>6:30 PM</strong>. Don\'t miss the Chuppah at 7:30 PM – it\'s the main event! Seriously, the good parts (and food!) start punctually.',
          faqQ2: 'What\'s the dress code?',
          faqA2: 'Dress to impress, but also dress to dance! Formal, modest attire is appreciated. Think "Simcha Chic" – because comfort meets elegance when you\'re celebrating!',
          faqQ3: 'Can I bring my kids?',
          faqA3: 'Absolutely! The more simcha, the merrier. Just remember to keep them away from the band\'s drum set and the dessert table (unless you brought extra for us!).',
          faqQ4: 'Is there food?',
          faqA4: 'Is the sky blue?! We\'re having a wedding, so yes, there will be plenty of delicious food. Come hungry, leave happy!',
          faqQ5: 'Where can I park?',
          faqA5: 'Ample parking is available on-site. For the full Monsey experience, allow an extra 15 minutes for unexpected traffic (especially on simcha days!).',
          faqQ6: 'Can I take photos?',
          faqA6: 'We kindly request no flash photography during the Chuppah. Otherwise, snap away and share the simcha! Just don\'t block the professional photographers – they\'ve got a job to do!',
          faqQ7: 'Can I be part of the flashmob?',
          faqA7_line1: 'You\'re asking the real questions! Absolutely! If you\'ve got moves (or even just enthusiasm!), we\'d love to have you.',
          faqA7_line2: 'Just reach out to <strong data-translate-key="tzippyKallah">Tzippy the kallah</strong>, and she\'ll share all the secret steps and make sure you\'re ready to bust a move! Get ready to dance the night away!',
          tzippyKallah: 'Tzippy the kallah', // Retained for translation lookup
          faqQ8: 'What if I have a question not listed here?',
          faqA8: 'No worries! Scroll down to our "Chat" section – we\'re (virtually) here to help with almost anything. Or just find us at the dessert table on the night!',
          mapTitle: 'Where to Find the Fun',
          mapLost: 'Lost? Don’t worry! We\'ve pinned all the essential simcha stops just for you.',
          mapFollowMusic: 'Need help finding us? Just follow the music and smiles — we’ll be there!',
          locationMapTitle: 'Location Map',
          mapGuideText: 'Your guide to the grand celebration! See you there, ready to party!',
          btnGetDirections: 'Get Directions',
          whatsPinnedTitle: 'What’s Pinned?',
          venueLabel: 'Wedding Venue:',
          oifrufLabel: 'Oifruf:',
          bogleitenLabel: 'Bogleiten:',
          bovarfenLabel: 'Bovarfen:',
          shabbosBrachasLabel: 'Shabbos Sheva Brachas:',
          topTipTitle: 'Top Tip:',
          topTipText: 'Monsey traffic: A wild card! Leave extra time to avoid missing appetizers (the horror!).',
          shabbosEventsTitle: 'Shabbos Oifruf & Sheva Brachas',
          shabbosEventsDescription: 'The simcha continues! Join us for these special Shabbos gatherings surrounding our wedding celebration. ',
          oifrufSeudahTitle: 'Shabbos Oifruf Seudah',
          oifrufSeudahDescription: 'Join us to wish the Chassan a thunderous Mazel Tov before the big day! Expect an atmosphere buzzing with good vibes!',
          bogleitenTitle: 'Bogleiten',
          bogleitenDepartingFrom: 'Departing from:',
          bogleitenDescription: 'The Kallah\'s grand send-off! Bring your loudest singing voices and prepare for a joyous procession!',
          bovarfenTitle: 'Bovarfen',
          bovarfenDescription: 'Get ready for sweet treats and even sweeter moments! (Strategic candy-catching highly encouraged.)',
          shevaBrachasTitle: 'Shabbos Sheva Brachas',
          shevaBrachasDescription: 'Extend the simcha on Shabbos with us! Expect more delicious food and even more incredible company.',
          blessingsTitle: 'Heartfelt Wishes & Happy Thoughts!',
          blessingsDescription: 'A few words from our nearest and dearest (and some we just made up for fun).',
          btnAddBruchas: 'Add Your Bruchas! ✨',
          yourUserId: 'Your User ID:',
          chatTitle: 'Got a Burning Question?',
          chatDescription: 'Whether it\'s about directions, what time to show up, or where to find the best kugel — we’re (virtually) here to help!',
          hpFieldLabel: 'Leave this blank',
          yourNameLabel: 'Your Name',
          yourNamePlaceholder: 'Your Name',
          yourEmailLabel: 'Your Email',
          yourEmailPlaceholder: 'Your Email',
          yourQuestionLabel: 'Your Question / Message',
          yourQuestionMessage: 'Your Question or Message',
          yourQuestionPlaceholder: 'Write your question or message here...',
          btnSendMessage: 'Send Your Message!',
          chatClosingNote: 'We’ll get back to you ASAP – or just find us by the dessert table (we\'ll probably be there!) 😉',
          thankYouTitle: 'A Heartfelt Thank You, from Meilech and Tzippy!',
          thankYouGreeting: 'Dearest family and friends,',
          thankYouPara1: 'As our wedding day draws near, our hearts are absolutely bursting with excitement and an overwhelming sense of gratitude. Looking back at all the incredible moments leading up to this, we realize just how lucky we are to have each of you in our lives. Your unwavering support, endless encouragement, and the sheer joy you\'ve shared with us have made every step of this journey truly unforgettable.',
          thankYouPara2: 'From the bottom of our hearts, thank you for being a part of our story. Thank you for the laughs, the advice, the simcha, and for simply being *you*. Knowing you\'re celebrating with us, whether in person or in spirit, fills us with so much happiness.',
          thankYouPara3: 'Get ready for a night of epic dancing, delicious food, and memories we\'ll cherish forever. We truly can\'t wait to share this momentous occasion with you and begin our lives together as husband and wife.',
          thankYouClosing: 'With all our love and excitement,',
          thankYouNames: 'Meilech & Tzippy',
          btnStillQuestion: 'Still Have a Question? Chat With Us!',
          footerCopyright: '&copy; 2025 Meilech & Tzippy. Built with love, laughter, and a touch of magic.',
          footerQuestions: 'Questions? Reach out to us at',
          yourBruchaAdded: 'Your brucha was added to the wall! Thank you!',
          authNotReady: 'Authentication not ready. Please try again in a moment.',
          fillNameBlessing: 'Please fill in both your name and blessing!',
          failedSendBrucha: 'Failed to send brucha. Please again.',
          fillAllFields: 'Please fill in all fields before sending your message!',
          messageSentSuccess: 'Your message zoomed right to us! We\'ll get back to you faster than you can say \'Mazel Tov!\'',
          messageSentError: 'Oops! Something went wrong sending your message. Please again.',
          networkError: 'Network error: Couldn\'t send your message. Check your connection!',
          authFailed: 'Failed to authenticate. Features requiring sign-in may not function.',
          excitementOffCharts: 'Excitement levels are off the charts!',
          markedCalendar: 'Can\'t wait to celebrate with you! Thanks for marking your calendar!',
          modalBlessingTitle: 'Share Your Joy! 🎉',
          modalBlessingDescription: 'Pour your heart out! Leave a special message for Meilech & Tzippy.',
          modalYourNameLabel: 'Your Name',
          yourBlessingName: 'Your Name for the blessing',
          modalYourBlessingLabel: 'Your Blessing',
          yourBlessingText: 'Your Blessing Text',
          yourBlessingPlaceholder: 'Write your heartfelt blessing here...',
          btnSendLove: 'Send Our Love! ❤️',
          loading: 'Loading...',
          authError: 'Auth Error!',
          viewWeddingProgress: 'View wedding progress',
          closeBlessingForm: 'Close blessing form',
          // New strings for tips
          tip1: "Don't forget your dancing shoes! We've got a certified simcha zone.",
          tip2: "Hydration is key! Especially when there's this much joyous dancing.",
          tip3: "If you see us looking stressed, just shout 'Mazel Tov!' It helps.",
          tip4: "Warning: Spontaneous outbreaks of happiness may occur. Embrace it!",
          tip5: "Lost your partner on the dance floor? Check the dessert table, they're probably there.",
          tip6: "Remember: calories consumed at a simcha don't count. It's science!"
        },
        he: {
          siteTitle: 'מיילך וציפי',
          navHome: 'ראשי',
          navCountdown: 'ספירה לאחור',
          navDetails: 'פרטים',
          navFunFacts: 'עובדות פיקנטיות',
          navQandA: 'שאלות ותשובות',
          navMap: 'מפה',
          navShabbos: 'שבת',
          navBrachos: 'ברכות',
          navChat: 'צ׳אט ופניות',
          openNavMenu: 'פתח תפריט ניווט',
          heroNames: 'מיילך וציפי',
          heroTagline: 'מתחתנים!',
          heroDescription: 'הלב שלנו מתמלא בשמחה והתרגשות עצומה, ואנו מזמינים אתכם להצטרף אלינו למסע הגדול בחיינו: בניית עתיד משותף! נוכחותכם תשלים את חגיגתנו באמת, אז בואו לחגוג איתנו את היום המיוחד הזה.',
          btnSaveDate: 'שמרו את התאריך!',
          btnFindFlights: 'מצאו טיסות!',
          progressPrefix: 'ההתרגשות בשיאה! מד האהבה שלנו ב-',
          progressSuffix: ' לקראת היום הגדול!',
          unlockSecret: 'גלו סוד קטן... 🤫',
          discoverSecretMessage: 'גלו הודעה סודית קטנה',
          triggerConfetti: 'הפעילו קונפטי!',
          countdownTitle: 'הספירה לאחור החלה!',
          countdownDaysLeftOnly: 'רק',
          countdownDaysLeftToGo: 'ימים נותרו!',
          weeks: 'שבועות',
          days: 'ימים',
          hours: 'שעות',
          minutes: 'דקות',
          seconds: 'שניות',
          totalMinutesPrefix: 'ההרפתקה הגדולה שלנו במרחק ',
          totalMinutesSuffix: ' דקות בלבד! התכוננו לחגיגה ששווה כל שנייה!',
          detailsTitle: 'פרטי יום החתונה',
          venueTitle: 'האולם המרכזי',
          venueDescription: 'המקום בו הקסם קורה ורחבת הריקודים תמיד מוכנה לפעולה!',
          dateTitle: 'היום הגדול',
          weddingDateEnglish: 'Monday, November 3, 2025',
          weddingDateHebrew: 'י"ב חשון תשפ"ו',
          dateDescription: 'סמנו ביומן, הדגישו! זה הולך להיות אירוע בלתי נשכח!',
          scheduleTitle: 'סדר היום של השמחה',
          kabulasPanimTime: 'קבלת פנים',
          kabulasPanimValue: '18:30 (הגיעו מוקדם, האוכל הטוב מתחיל בזמן!)',
          chuppahTime: 'חופה',
          chuppahValue: '19:30 (הכינו את הטישו לרגעים מרגשים ובלתי נשכחים!)',
          seudahTime: 'סעודה',
          seudahValue: '20:30 (תנו למשתה להתחיל! תשמחו שלבשתם מכנסיים נוחים.)',
          dancingBeginsTime: 'תחילת ריקודים',
          dancingBeginsValue: '22:00 (הביאו את נעלי הריקוד והתכוננו לשמחה מקסימלית!)',
          vibeTitle: 'האווירה',
          vibeDescription: 'בואו מוכנים לחגוג בשמחה וכבוד. הערב יהיה מלא במוזיקה, חום ושמחה אמיתית – צפו לריקודים סוחפים!',
          transportationTitle: 'הגעה למקום',
          transportationDescription: 'החניה עלינו! בואו בנסיעה משותפת לאווירה טובה יותר (ודאגו שיהיה לכם בן זוג לריקודים).',
          funFactsTitle: 'עובדות מהנות וקטנות!',
          funFactsDescription: 'כי כל סיפור אהבה אגדי ראוי לכמה עובדות מפתיעות וטריוויה אקראית. תתכוננו לשמוע פרטים משעשעים!',
          factDidYouKnowTitle: 'הידעתם?',
          factDidYouKnowText: 'ב-3 בנובמבר, יום חתונתנו, אנחנו לא רק קושרים את הקשר – אנחנו גם חוגגים את יום הסנדוויץ\' הלאומי! צירוף מקרים? לא נראה לנו. התכוננו לאהבה עשירה ומשביעה כמו סנדוויץ\' הדלי האהוב עליכם!',
          factMusicalTitle: 'הפסקה מוזיקלית',
          factMusicalText: 'הכינו את מיתרי הקול! אנו מצפים לסימפוניה של \'מזל טוב!\' נלהבים ושירה שמחה שתטלטל את האולם (בצורה הטובה ביותר, כמובן!).',
          factRoyalStatusTitle: 'מעמד מלכותי',
          factRoyalStatusText: 'על פי המסורת היהודית, הכלה היא מלכה והחתן הוא מלך ביום חתונתם. אז, הרגישו חופשי לפנות אלינו בתארינו המלכותיים! (רק ל-3 בנובמבר, מבטיחים).',
          factSweetPredictionsTitle: 'תחזיות מתוקות',
          factSweetPredictionsText: 'אנחנו מנבאים ששולחן הקינוחים יהיה רחבת הריקודים הפופולרית ביותר. הקפידו לתפוס את הממתקים שלכם מוקדם, לפני שהפרץ הסוכר יתחיל!',
          factDancingShoesTitle: 'התראת נעלי ריקוד!',
          factDancingShoesText: 'חדשות טובות, חובבי ריקוד! רחבת הריקודים אושרה רשמית לשמחה מקסימלית! יש המון מקום לכל הצעדים הטובים ביותר שלכם, אז אל תתאפקו!',
          factHistoricDayTitle: 'יום היסטורי',
          factHistoricDayText: 'יום חתונתנו חולק תאריך עם שיגור היסטורי: ב-3 בנובמבר 1957, ספוטניק 2 נשא את הכלבה לייקה לחלל. אנחנו גם משגרים את עצמנו למשהו אינסופי – חיי נישואין! (עם קצת פחות חוסר כבידה, לשמחתנו).',
          faqTitle: 'השאלות הבוערות שלכם (והתשובות הכנות שלנו)',
          faqDescription: 'אנחנו יודעים שיש לכם שאלות. הנה התשובות לשאלות שאתם *באמת* חושבים עליהן.',
          faqQ1: 'באיזו שעה כדאי להגיע?',
          faqA1: 'נשמח לראות אתכם בקבלת פנים בשעה <strong>18:30</strong>. אל תחמיצו את החופה ב-19:30 – זה האירוע המרכזי! ברצינות, החלקים הטובים (והאוכל!) מתחילים בזמן.',
          faqQ2: 'מה קוד הלבוש?',
          faqA2: 'התלבשו להרשים, אך גם לרקוד! לבוש רשמי וצנוע מוערך. חשבו "שיק שמחה" – כי נוחות פוגשת אלגנטיות כשחוגגים!',
          faqQ3: 'האם מותר להביא ילדים?',
          faqA3: 'בהחלט! ככל שיותר שמחה, כך עליז יותר. רק זכרו להרחיק אותם מערכת התופים של הלהקה ומלחתן הקינוחים (אלא אם הבאתם תוספות בשבילנו!).',
          faqQ4: 'האם יש אוכל?',
          faqA4: 'האם השמיים כחולים?! יש לנו חתונה, אז כן, יהיה שפע של אוכל טעים. בואו רעבים, לכו שמחים!',
          faqQ5: 'איפה אפשר לחנות?',
          faqA5: 'חניה בשפע זמינה באתר. לחוויית מונסי המלאה, הקציבו 15 דקות נוספות לפקקים בלתי צפויים (במיוחד בימי שמחה!).',
          faqQ6: 'האם מותר לצלם תמונות?',
          faqA6: 'אנו מבקשים שלא להשתמש בפלאש במהלך החופה. חוץ מזה, צלמו ושתפו את השמחה! רק אל תחסמו את הצלמים המקצועיים – יש להם עבודה לעשות!',
          faqQ7: 'האם אוכל להיות חלק מהפלאשמוב?',
          faqA7_line1: 'אתם שואלים את השאלות האמיתיות! בהחלט! אם יש לכם מהלכים (או אפילו רק התלהבות!), נשמח שתצטרפו.',
          faqA7_line2: 'פשוט צרו קשר עם <strong data-translate-key="tzippyKallah">ציפי הכלה</strong>, והיא תשתף אתכם בכל הצעדים הסודיים ותוודא שאתם מוכנים לריקודים! התכוננו לרקוד כל הלילה!',
          tzippyKallah: 'ציפי הכלה',
          faqQ8: 'מה אם יש לי שאלה שלא מופיעה כאן?',
          faqA8: 'אל דאגה! גללו למטה למקטע "צ׳אט ופניות" שלנו – אנחנו כאן (וירטואלית) כדי לעזור כמעט בכל דבר. או פשוט מצאו אותנו ליד שולחן הקינוחים בלילה!',
          mapTitle: 'היכן למצוא את הכיף',
          mapLost: 'הלכתם לאיבוד? אל דאגה! סימנו את כל תחנות השמחה החשובות במיוחד בשבילכם.',
          mapFollowMusic: 'צריכים עזרה במציאתנו? פשוט עקבו אחרי המוזיקה והחיוכים – אנחנו נהיה שם!',
          locationMapTitle: 'מפת המיקום',
          mapGuideText: 'המדריך שלכם לחגיגה הגדולה! נתראה שם, מוכנים למסיבה!',
          btnGetDirections: 'קבלו הוראות הגעה',
          whatsPinnedTitle: 'מה מסומן במפה?',
          venueLabel: 'מקום החתונה:',
          oifrufLabel: 'אויפרוף:',
          bogleitenLabel: 'בוגלייטן:',
          bovarfenLabel: 'בוארופן:',
          shabbosBrachasLabel: 'שבע ברכות שבת:',
          topTipTitle: 'טיפ מנצח:',
          topTipText: 'תנועה במונסי: קלף פראי! השאירו זמן נוסף כדי לא להחמיץ מנות ראשונות (הזוועה!).',
          shabbosEventsTitle: 'שבת אויפרוף ושבע ברכות',
          shabbosEventsDescription: 'השמחה ממשיכה! הצטרפו אלינו להתכנסויות השבת המיוחדות שמסביב לחגיגת חתונתנו.',
          oifrufSeudahTitle: 'סעודת אויפרוף שבת',
          oifrufSeudahDescription: 'הצטרפו אלינו לאחל לחתן "מזל טוב!" רועם לפני היום הגדול! צפו לאווירה שוקקת באנרגיות טובות!',
          bogleitenTitle: 'בוגלייטן',
          bogleitenDepartingFrom: 'יוצאים מ:',
          bogleitenDescription: 'הפרידה החגיגית של הכלה! הביאו את קולות השירה החזקים ביותר שלכם והתכוננו לתהלוכה שמחה!',
          bovarfenTitle: 'בוארופן',
          bovarfenDescription: 'התכוננו למתוקים ולרגעים מתוקים עוד יותר! (תפיסת ממתקים אסטרטגית מומלצת בחום.)',
          shevaBrachasTitle: 'שבת שבע ברכות',
          shevaBrachasDescription: 'האריכו את השמחה בשבת איתנו! צפו לעוד אוכל טעים ועוד חברה מדהימה.',
          blessingsTitle: 'איחולים מכל הלב ומחשבות טובות!',
          blessingsDescription: 'כמה מילים מהקרובים אלינו (וכמה שהמצאנו בשביל הכיף).',
          btnAddBruchas: 'הוסיפו את ברכותיכם! ✨',
          yourUserId: 'מזהה המשתמש שלך:',
          chatTitle: 'יש לכם שאלה בוערת?',
          chatDescription: 'בין אם זה על הוראות הגעה, שעת הגעה, או איפה מוצאים את הקוגל הטוב ביותר – אנחנו (וירטואלית) כאן כדי לעזור!',
          hpFieldLabel: 'השאירו שדה זה ריק',
          yourNameLabel: 'שמכם',
          yourNamePlaceholder: 'שמכם',
          yourEmailLabel: 'האימייל שלכם',
          yourEmailPlaceholder: 'האימייל שלכם',
          yourQuestionLabel: 'שאלתכם / הודעתכם',
          yourQuestionMessage: 'שאלתכם או הודעתכם',
          yourQuestionPlaceholder: 'כתבו את שאלתכם או הודעתכם כאן...',
          btnSendMessage: 'שלחו הודעה!',
          chatClosingNote: 'נחזור אליכם בהקדם – או שתמצאו אותנו ליד שולחן הקינוחים (כנראה שנהיה שם!) 😉',
          thankYouTitle: 'תודה מקרב לב, ממיילך וציפי!',
          thankYouGreeting: 'משפחה וחברים יקרים,',
          thankYouPara1: 'ככל שיום חתונתנו מתקרב, ליבנו מתמלא בהתרגשות עצומה ובתחושת תודה עמוקה. כשאנו מביטים לאחור על הרגעים המדהימים שהובילו עד הלום, אנו מבינים כמה ברי מזל אנחנו שיש לכל אחד ואחת מכם בחיים. תמיכתכם הבלתי מעורערת, העידוד האינסופי והשמחה הטהורה ששיתפתם איתנו הפכו כל שלב במסע הזה לבלתי נשכח באמת.',
          thankYouPara2: 'ממעמקי ליבנו, תודה לכם על היותכם חלק מהסיפור שלנו. תודה על הצחוקים, העצות, השמחה, ופשוט על היותכם *אתם*. הידיעה שאתם חוגגים איתנו, בין אם באופן אישי ובין אם ברוח, ממלאת אותנו באושר רב.',
          thankYouPara3: 'התכוננו ללילה של ריקודים אפיים, אוכל משובח וזיכרונות שננצור לנצח. אנו באמת לא יכולים לחכות לחלוק עמכם את האירוע ההיסטורי הזה ולהתחיל את חיינו יחד כבעל ואישה.',
          thankYouClosing: 'באהבה והתרגשות רבה,',
          thankYouNames: 'מיילך וציפי',
          btnStillQuestion: 'עדיין יש שאלה? צ\'אטו איתנו!',
          footerCopyright: '&copy; 2025 מיילך וציפי. נבנה באהבה, צחוק ונגיעה של קסם.',
          footerQuestions: 'שאלות? צרו קשר איתנו בכתובת:',
          yourBruchaAdded: 'ברכתכם נוספה לקיר! תודה רבה!',
          authNotReady: 'שירות האימות אינו מוכן. אנא נסו שוב בעוד רגע.',
          fillNameBlessing: 'אנא מלאו גם את שמכם וגם את הברכה!',
          failedSendBrucha: 'שליחת הברכה נכשלה. אנא נסו שוב.',
          fillAllFields: 'אנא מלאו את כל השדות לפני שליחת ההודעה!',
          messageSentSuccess: 'הודעתכם נשלחה אלינו במהירות! נחזור אליכם מהר יותר ממה שתוכלו לומר \'מזל טוב!\'',
          messageSentError: 'אופס! משהו השתבש בשליחת הודעתכם. אנא נסו שוב.',
          networkError: 'שגיאת רשת: לא ניתן לשלוח את הודעתכם. בדקו את חיבור האינטרנט שלכם!',
          authFailed: 'כשל באימות. ייתכן שתכונות הדורשות כניסה לא יפעלו.',
          excitementOffCharts: 'רמות ההתרגשות בשמיים!',
          markedCalendar: 'לא יכולים לחכות לחגוג איתכם! תודה שסימנתם ביומן!',
          modalBlessingTitle: 'שתפו את שמחתכם! 🎉',
          modalBlessingDescription: 'שפכו את ליבכם! השאירו הודעה מיוחדת למיילך וציפי.',
          modalYourNameLabel: 'שמכם',
          yourBlessingName: 'שמכם עבור הברכה',
          modalYourBlessingLabel: 'ברכתכם',
          modalYourBlessingText: 'טקסט הברכה שלכם',
          modalYourBlessingPlaceholder: 'כתבו את ברכתכם הכנה כאן...',
          btnSendLove: 'שלחו אהבה! ❤️',
          loading: 'טוען...',
          authError: 'שגיאת אימות!',
          viewWeddingProgress: 'צפו בהתקדמות החתונה',
          closeBlessingForm: 'סגור טופס ברכה',
          // New strings for tips (Hebrew)
          tip1: "אל תשכחו את נעלי הריקוד! יש לנו פה רחבת שמחה מאושרת רשמית.",
          tip2: "הידרציה היא המפתח! במיוחד כשיש כל כך הרבה ריקודי שמחה.",
          tip3: "אם אתם רואים אותנו לחוצים, פשוט תצעקו 'מזל טוב!' זה עוזר.",
          tip4: "אזהרה: התפרצויות ספונטניות של אושר עלולות להתרחש. תזרמו עם זה!",
          tip5: "איבדתם את בן/בת הזוג ברחבת הריקודים? בדקו בשולחן הקינוחים, הם כנראה שם.",
          tip6: "זכרו: קלוריות שנצרכות בשמחה לא נספרות. זו עובדה מדעית!"
        }
      };

      // Array of secret messages for the Easter egg button
      const secretMessages_en = [
        "Spoiler Alert: We're totally getting married!",
        "Warning: May spontaneously break into dance at any moment!",
        "Fun Fact: We're practicing our 'just married' smiles. They're dazzling!",
        "Our love story is officially rated E for Everyone (especially for eating cake!)",
        "Get ready for a celebration so epic, it'll make history (or at least family legend!)",
        "Don't tell anyone, but we're pretty excited to see *you* there!"
      ];
      const secretMessages_he = [
        "ספוילר: אנחנו לגמרי מתחתנים!",
        "אזהרה: עלולים לפרוץ בריקודים ספונטניים בכל רגע!",
        "עובדה כיפית: אנחנו מתרגלים את חיוכי ה'רק התחתנו' שלנו. הם מסנוורים!",
        "סיפור האהבה שלנו מדורג רשמית כ'מומלץ לכולם' (במיוחד לאוהבי עוגות!)",
        "התכוננו לחגיגה כה אדירה, שהיא תיכנס להיסטוריה (או לפחות לאגדות המשפחתיות!)",
        "אל תגלו לאף אחד, אבל אנחנו ממש מתרגשים לראות *אתכם* שם!"
      ];

      // Array of funny jokes/quotes for countdown cards (new feature)
      const countdownJokes_en = [
          "Tick-tock, goes the clock! Get ready for the big day!",
          "We're getting closer! Our excitement levels are reaching critical mass.",
          "Soon, 'single' will just be a word in the dictionary for us!",
          "Warning: May spontaneously start dancing due to overwhelming anticipation!",
          "The wedding countdown is like a fine wine, it gets better with every passing second!",
          "Still plenty of time to find a date, or just bring your dancing shoes!",
          "Less time for cold feet, more time for warm hearts!",
          "Don't worry, we're practicing our 'just married' smiles. They're dazzling!",
          "It's happening! We're not just counting days, we're counting memories to make!"
      ];
      const countdownJokes_he = [
          "טיק-טוק, השעון מתקתק! תתכוננו ליום הגדול!",
          "אנחנו מתקרבים בצעדי ענק! רמות ההתרגשות שלנו מגיעות לשיא.",
          "בקרוב, 'רווק' תהיה רק מילה מיושנת במילון שלנו!",
          "אזהרה: עלולים לפרוץ בריקודים ספונטניים עקב התרגשות יתר!",
          "הספירה לאחור לחתונה היא כמו יין משובח, היא רק משתבחת עם כל שנייה שעוברת!",
          "עדיין יש לכם מספיק זמן למצוא דייט, או פשוט להביא את נעלי הריקוד!",
          "פחות זמן לרגליים קרות, יותר זמן ללבבות חמים ומלאי אהבה!",
          "אל דאגה, אנחנו מתרגלים את חיוכי ה'רק התחתנו' שלנו. הם מסנוורים!",
          "זה קורה! אנחנו לא רק סופרים ימים, אנחנו סופרים את הזיכרונות שעומדים להיווצר!"
      ];


      // --- Utility Functions ---
      function setLanguage(lang) {
          currentLang = lang;
          htmlElement.setAttribute('lang', lang);
          if (metaTitle) metaTitle.textContent = metaTitle.getAttribute(`data-${lang}-title`) || translations[lang].siteTitle;
          if (metaDescription) metaDescription.setAttribute('content', metaDescription.getAttribute(`data-${lang}-content`));
          if (metaKeywords) metaKeywords.setAttribute('content', metaKeywords.getAttribute(`data-${lang}-content`));

          // Handle special FAQ answer for email link
          // This part needs to be dynamically updated based on the original HTML structure and translation keys
          const faqQ7Detail = document.querySelector('details.faq-item:has(span[data-translate-key="faqQ7"])');
          if (faqQ7Detail) {
              const faqA7Element = faqQ7Detail.querySelector('.faq-answer p');
              if (faqA7Element) {
                  const faqA7Line1Text = translations[lang].faqA7_line1 || '';
                  const faqA7Line2Text = translations[lang].faqA7_line2 || '';
                  const tzippyKallahText = translations[lang].tzippyKallah || 'Tzippy the kallah';
                  
                  // Construct the innerHTML with the mailto link embedded into the phrase
                  // Ensure the mailto link uses data-email-trigger for JS click handling
                  faqA7Element.innerHTML = `${faqA7Line1Text} ${faqA7Line2Text.replace(tzippyKallahText, `<a href="mailto:tzippykornbluh@gmail.com" data-email-trigger="tzippykornbluh@gmail.com" class="text-primary-navy hover:underline font-bold" data-translate-key="tzippyKallah">${tzippyKallahText}</a>`)}`;
              }
          }

          allTranslatableElements.forEach(element => {
              // Skip faqA7_line1, faqA7_line2, tzippyKallah as they are handled above or are just translation keys for the JS
              const key = element.getAttribute('data-translate-key');
              if (key && (key.startsWith('faqA7_line') || key === 'tzippyKallah')) {
                  return;
              }

              const ariaLabelKey = element.getAttribute('data-translate-aria-label-key');
              const placeholderKey = element.getAttribute('data-translate-placeholder-key');

              if (key && translations[lang][key]) element.innerHTML = translations[lang][key];
              if (ariaLabelKey && translations[lang][ariaLabelKey]) element.setAttribute('aria-label', translations[lang][ariaLabelKey]);
              if (placeholderKey && translations[lang][placeholderKey]) element.setAttribute('placeholder', translations[lang][placeholderKey]);
          });

          langToggleButton.textContent = (currentLang === 'en') ? 'עברית' : 'English';
          displayCuratedBlessings();
          updateAllCountdownElements();
      }

      function showMessageBox(messageContent, duration = 5000, isHTML = false) {
          if (isHTML) {
            messageBox.innerHTML = messageContent;
          } else {
            messageBox.textContent = messageContent;
          }
          messageBox.classList.add('show');
          setTimeout(() => messageBox.classList.remove('show'), duration);
      }

      function showModal(modalElement) { if(modalElement) modalElement.classList.add('show'); }
      function hideModal(modalElement) { if(modalElement) modalElement.classList.remove('show'); }
      
      const themeColors = ['#B85C3A', '#1E2C4F', '#84A98C', '#FFFFFF']; // Defined theme colors for confetti (copper, navy, sage, white)

      function triggerConfetti(options = {}) {
        if(typeof confetti === 'function') {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
            colors: themeColors, // Use theme colors
            ...options
          });
        }
      }

      function triggerLocalizedConfetti(targetElement) {
          const rect = targetElement.getBoundingClientRect();
          const originX = (rect.left + rect.right) / 2 / window.innerWidth;
          const originY = (rect.top + rect.bottom) / 2 / window.innerHeight;
          triggerConfetti({ origin: { x: originX, y: originY }, colors: themeColors }); // Use theme colors
      }

      // --- Countdown & Progress Logic ---
      function setCountdownIntensity(weeksLeft) {
          if (!countdownGridWrapper) return;
          countdownGridWrapper.classList.remove('intensity-low', 'intensity-medium', 'intensity-high', 'intensity-flash');
          if (weeksLeft < 1) {
              countdownGridWrapper.classList.add('intensity-flash');
          } else if (weeksLeft <= 4) {
              countdownGridWrapper.classList.add('intensity-high');
          } else if (weeksLeft <= 10) {
              countdownGridWrapper.classList.add('intensity-medium');
          } else {
              countdownGridWrapper.classList.add('intensity-low');
          }
      }

      function updateAllCountdownElements() {
        const now = Date.now();
        const diff = WEDDING_TS - now;
        if (diff <= 0) {
          if (countdownInterval) clearInterval(countdownInterval);
          if (daysLeftCountdownEl) daysLeftCountdownEl.innerText = "0";
          if (totalDaysHiddenEl) totalDaysHiddenEl.innerText = "0";
          if(weeksEl) weeksEl.innerText = "0"; if(daysEl) daysEl.innerText = "0"; if(hoursEl) hoursEl.innerText = "0"; if(minsEl) minsEl.innerText = "0"; if(secsEl) secsEl.innerText = "0";
          if(percentDoneEl) percentDoneEl.innerText = "100%";
          const heroTaglineElement = document.querySelector('[data-translate-key="heroTagline"]');
          if (heroTaglineElement) heroTaglineElement.textContent = translations[currentLang].weddingPassed || "They tied the knot! 🎉";
          if(saveDateBtn) saveDateBtn.style.display = "none";
          setCountdownIntensity(0);
          return;
        }
        const dTotal = Math.floor(diff / (1000*60*60*24));
        const w = Math.floor(dTotal / 7);
        const dRem = dTotal % 7;
        const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        const m = Math.floor((diff % (1000*60*60)) / (1000*60));
        const s = Math.floor((diff % (1000*60)) / 1000);

        if (daysLeftCountdownEl) daysLeftCountdownEl.innerText = dTotal;
        if (weeksEl) weeksEl.innerText = w; if (daysEl) daysEl.innerText = dRem; if (hoursEl) hoursEl.innerText = h; if (minsEl) minsEl.innerText = m; if (secsEl) secsEl.innerText = s;
        if (totalDaysHiddenEl) totalDaysHiddenEl.innerText = dTotal;
        if (totalMinutesDisplayEl) totalMinutesDisplayEl.innerText = Math.floor(diff / (1000 * 60)).toLocaleString();
        setCountdownIntensity(w);
      }

      function setupSaveDate() {
        const title = encodeURIComponent(translations[currentLang].siteTitle || "Meilech & Tzippy’s Wedding!");
        const details = encodeURIComponent((currentLang === 'en' ? "Join us for the chuppah, seudah, dancing & simcha!" : "הצטרפו אלינו לחופה, לסעודה, לריקודים ולשמחה!"));
        const loc = encodeURIComponent("Ateres Chaya Surah, 106 S Madison Ave, Spring Valley, NY");
        const start = new Date(WEDDING_TS).toISOString().replace(/-|:|\.\d+/g,"");
        const end = new Date(WEDDING_TS + 4*60*60*1000).toISOString().replace(/-|:|\.\d+/g,"");
        if(saveDateBtn) saveDateBtn.href = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${start}/${end}&details=${details}&location=${loc}&sf=true&output=xml`;
      }

      function animateProgressBar() {
        const now = Date.now();
        const span = WEDDING_TS - ENGAGEMENT_TS;
        const done = now - ENGAGEMENT_TS;
        const targetPercent = Math.min(100, Math.max(0, (done / span) * 100));
        currentAnimatedPercent += (targetPercent - currentAnimatedPercent) * 0.02;
        currentAnimatedPercent = Math.max(0, Math.min(100, currentAnimatedPercent));
        if (progressFillEl) progressFillEl.style.width = currentAnimatedPercent + "%";
        if (percentDoneEl) percentDoneEl.innerText = `${Math.round(currentAnimatedPercent)}%`;
        if (now < WEDDING_TS) requestAnimationFrame(animateProgressBar); else { if(progressFillEl) progressFillEl.style.width = "100%"; if(percentDoneEl) percentDoneEl.innerText = "100%"; }
      }

      // --- Blessings Wall Logic ---
      function createBlessingCard(blessing) {
        const div = document.createElement('div');
        div.className = 'blessing-card fade-in-hidden relative overflow-hidden group';
        div.innerHTML = `
          <p class="relative z-10 text-center font-body text-lg">${blessing.text}</p>
          <p class="relative z-10 text-center text-sm font-semibold mt-4 text-primary-navy group-hover:text-white transition-colors duration-300">- ${blessing.name}</p>
          <div class="absolute inset-0 bg-accent-copper opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform scale-x-0 group-hover:scale-x-100 origin-left rounded-2xl"></div>
        `;
        if (blessingWall) {
          blessingWall.appendChild(div);
          setTimeout(() => { div.classList.add('fade-in-visible'); div.classList.remove('fade-in-hidden'); }, 100);
        }
      }

      function displayCuratedBlessings() {
          if (!blessingWall) return;
          const blessingData = (currentLang === 'en') ? curatedBlessings_en : curatedBlessings_he;
          // Shuffle the array and take the first 4
          const shuffled = [...blessingData].sort(() => 0.5 - Math.random());
          const selectedBlessings = shuffled.slice(0, 4);
          
          blessingWall.innerHTML = ''; // Clear existing blessings
          selectedBlessings.forEach(blessing => createBlessingCard(blessing));
      }

      // --- Periodic Tips Logic ---
      let currentTipIndex = 0;
      function showRandomTip() {
        const tips = (currentLang === 'en') ? funnyTips_en : funnyTips_he;
        if (tips.length === 0) return;

        let nextIndex;
        do {
          nextIndex = Math.floor(Math.random() * tips.length);
        } while (nextIndex === currentTipIndex && tips.length > 1); // Ensure different tip if possible

        currentTipIndex = nextIndex;
        showMessageBox(tips[currentTipIndex], 7000, false); // Show for 7 seconds, not HTML
      }


      // --- Contact Form & Firebase Init --- (No changes to logic, just ensuring robustness)
      async function handleContactSubmit(event) {
          event.preventDefault();
          const name = contactForm.querySelector('[name="name"]').value.trim();
          const email = contactForm.querySelector('[name="email"]').value.trim();
          const question = contactForm.querySelector('[name="question"]').value.trim();
          if (!name || !email || !question) { showMessageBox(translations[currentLang].fillAllFields, 3000); return; }
          
          // FormSubmit requires emails comma-separated in the action attribute or a hidden field.
          // Using a hidden field with a shared constant for multiple recipients.
          const form = event.target;
          const hiddenRecipientsInput = document.createElement('input');
          hiddenRecipientsInput.type = 'hidden';
          hiddenRecipientsInput.name = '_recipients';
          hiddenRecipientsInput.value = FORM_SUBMIT_EMAILS;
          form.appendChild(hiddenRecipientsInput);

          try {
              // Note: Formsubmit's `ajax` endpoint can only send to the email in its action attribute.
              // To send to multiple, we explicitly list them in `_recipients` in the payload.
              // The primary email in the fetch URL determines *which* Formsubmit endpoint is hit.
              const response = await fetch('https://formsubmit.co/ajax/' + FORM_SUBMIT_EMAILS.split(',')[0].trim(), { 
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                  body: JSON.stringify({
                      name: name,
                      email: email,
                      question: question,
                      _subject: translations[currentLang].weddingWebsiteInquirySubject || 'Wedding Website Inquiry!', // Dynamic subject
                      _recipients: FORM_SUBMIT_EMAILS // This field is important for Formsubmit
                  })
              });
              if (response.ok) { showMessageBox(translations[currentLang].messageSentSuccess); contactForm.reset(); }
              else { throw new Error('Form submission failed'); }
          } catch (error) { console.error('Formsubmit error:', error); showMessageBox(translations[currentLang].messageSentError); }
          finally {
            if (hiddenRecipientsInput.parentNode) {
              hiddenRecipientsInput.parentNode.removeChild(hiddenRecipientsInput); // Clean up
            }
          }
      }

      // --- Main DOM Content Loaded Event Listener ---
      document.addEventListener("DOMContentLoaded", () => {
        setLanguage('en'); // Always default to English
        if(heroContent) heroContent.classList.add('opacity-100', 'scale-100');
        
        setupSaveDate();
        updateAllCountdownElements();
        countdownInterval = setInterval(updateAllCountdownElements, 1000);
        requestAnimationFrame(animateProgressBar);
        displayCuratedBlessings(); // Display curated blessings on load

        // Start periodic tips
        showRandomTip(); // Show first tip immediately
        tipInterval = setInterval(showRandomTip, 30000); // Show a new tip every 30 seconds

        // Event Listeners
        hamburgerMenu.addEventListener('click', () => navLinksContainer.classList.toggle('open'));
        navLinks.forEach(link => link.addEventListener('click', () => navLinksContainer.classList.remove('open')));
        langToggleButton.addEventListener('click', () => setLanguage(currentLang === 'en' ? 'he' : 'en'));
        window.addEventListener('scroll', () => {
            navHeader.classList.toggle('scrolled', window.scrollY > 50);
            // Show/hide back to top button
            if (backToTopBtn) {
                backToTopBtn.classList.toggle('show', window.scrollY > 300); // Show after 300px scroll
            }
        });
        
        // Confetti for Hero Names click/hover
        if (heroNamesEl) {
          heroNamesEl.addEventListener('click', () => triggerConfetti({ particleCount: 150, spread: 120 })); // Larger, wider confetti for main names
          heroNamesEl.addEventListener('mouseenter', () => triggerConfetti({ particleCount: 50, spread: 60 })); // Smaller burst on hover
        }

        // Confetti for secret trigger spot
        if(confettiTriggerSpot) confettiTriggerSpot.addEventListener('click', () => triggerConfetti({ particleCount: 200 }));
        
        // Event Delegation for Countdown Cards
        if(countdownGridWrapper) {
          countdownGridWrapper.addEventListener('click', (e) => {
            const card = e.target.closest('.countdown-card');
            if(card && !card.classList.contains('is-flipped')) {
                // Unflip any other card that might be open
                document.querySelectorAll('.countdown-card.is-flipped').forEach(flippedCard => {
                    flippedCard.classList.remove('is-flipped');
                });
                
                triggerLocalizedConfetti(card);

                // Get a new joke and set it
                const jokesArray = (currentLang === 'en') ? countdownJokes_en : countdownJokes_he;
                let randomIndex;
                do { randomIndex = Math.floor(Math.random() * jokesArray.length); }
                while (randomIndex === lastJokeIndex && jokesArray.length > 1);
                lastJokeIndex = randomIndex;
                const jokeTextEl = card.querySelector('.joke-text');
                if(jokeTextEl) jokeTextEl.textContent = jokesArray[randomIndex];

                // Flip the clicked card
                card.classList.add('is-flipped');
                
                // Set a timer to flip it back
                setTimeout(() => {
                    card.classList.remove('is-flipped');
                }, 4000); // Flips back after 4 seconds
            }
          });
        }
        
        if (progressButton) progressButton.addEventListener('click', () => showMessageBox(translations[currentLang].excitementOffCharts));
        if (saveDateBtn) saveDateBtn.addEventListener('click', () => showMessageBox(translations[currentLang].markedCalendar));
        if (contactForm) contactForm.addEventListener('submit', handleContactSubmit);
        if(secretMessageTrigger) secretMessageTrigger.addEventListener('click', () => {
            if (secretMessageTimeout) clearTimeout(secretMessageTimeout);
            const messages = (currentLang === 'en') ? secretMessages_en : secretMessages_he;
            let nextIndex;
            do { nextIndex = Math.floor(Math.random() * messages.length); }
            while(messages[nextIndex] === secretMessageContent.textContent && messages.length > 1);
            secretMessageContent.textContent = messages[nextIndex];
            secretMessageContent.classList.remove('hidden');
            setTimeout(() => secretMessageContent.classList.add('revealed'), 10);
            secretMessageTimeout = setTimeout(() => secretMessageContent.classList.remove('revealed'), 10000);
        });

        // Email trigger for Tzippy the kallah in FAQ (direct mailto)
        document.addEventListener('click', (event) => {
            const target = event.target.closest('[data-email-trigger]');
            if (target) {
                // Ensure the email link itself is a mailto, not just data-trigger
                const mailtoLink = `mailto:${target.getAttribute('data-email-trigger')}`;
                window.location.href = mailtoLink; // Directly trigger mail client
            }
        });

        // Back to top button functionality
        if (backToTopBtn) {
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // Share Website Button
        if (shareWebsiteBtn) {
            shareWebsiteBtn.addEventListener('click', async () => {
                const shareData = {
                    title: translations[currentLang].siteTitle,
                    text: translations[currentLang].shareWebsiteText || (currentLang === 'en' ? 'Join us to celebrate Meilech & Tzippy\'s wedding!' : 'הצטרפו לחגוג את חתונתם של מיילך וציפי!'),
                    url: window.location.href
                };
                try {
                    if (navigator.share) {
                        await navigator.share(shareData);
                        showMessageBox(translations[currentLang].websiteSharedSuccessfully);
                    } else {
                        // Fallback: Copy to clipboard
                        const dummy = document.createElement('textarea');
                        document.body.appendChild(dummy);
                        dummy.value = window.location.href;
                        dummy.select();
                        document.execCommand('copy');
                        document.body.removeChild(dummy);
                        showMessageBox(translations[currentLang].websiteLinkCopied);
                    }
                } catch (err) {
                    console.error('Share failed:', err);
                    showMessageBox(translations[currentLang].websiteShareFailed);
                }
            });
        }
        
        // Intersection Observer for fade-in animations
        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('fade-in-visible');
              entry.target.classList.remove('fade-in-hidden');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in-hidden').forEach(el => observer.observe(el));
      });
    })();
  </script>

</body>
</html>
